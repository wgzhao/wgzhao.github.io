
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>\[/sbin学习\]r\*命令 - Linux系统管理</title>
  <meta name="author" content="wgzhao">

  
  <meta name="description" content="/sbin下的 q 开头的命令只有两个，quotacheck 和 quotaon，其中 quotaoff 是 quotaon 的软连接。这是和磁盘配额有关的命令，详细情况可以参考 Linux 下的配额配置手册。 r 开头的命令稍微多些，有 25 个，不过有 7 个是软连接。 restore： 从 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wgzhao.github.io/2007/05/21/commands-start-r">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Linux系统管理" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<style>
div.entry-content > p, section > p, blockquote > p {text-indent: 2em;}
code {text-indent: 0em;}
div.entry-content > p:first-of-type {text-indent: 0em;}
div.entry-content > p:first-of-type:first-letter
  {font-size:180%;font-weight:bold;}
</style>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux系统管理</a></h1>
  
    <h2>关注Linux系统管理，运维开发以及大数据</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wgzhao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">\[/sbin学习\]r\*命令</h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-05-21T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p><code>/sbin</code>下的 q 开头的命令只有两个，quotacheck 和 quotaon，其中 quotaoff 是 quotaon 的软连接。这是和磁盘配额有关的命令，详细情况可以参考 Linux 下的配额配置手册。</p>

<p>r 开头的命令稍微多些，有 25 个，不过有 7 个是软连接。</p>

<!--more-->


<p>restore：  从 dump 出来的备份恢复到文件系统中，我仅测试了一个例子，看上去一切正常，不过从这个例子。如果不考虑一些特别因素，那么 dump/restore 的使用方法是很简单的，下面是我测试的例子</p>

<pre><code> #mount /dev/mapper/vgdata-lvtest /misc
 #cp -a /boot/* /misc/
 #umount /misc
 #dump z9 -f /tmp/lvtest.dump /dev/mapper/vgdata-lvtest
 DUMP: Date of this level dump: Mon May 21 10:34:31 2007
 DUMP: Dumping /dev/mapper/vgdata-lvtest (an unlisted file system) to       /tmp/lvtest.dump
 DUMP: Label: none
 DUMP: Writing 10 Kilobyte records
 DUMP: Compressing output at compression level 9 (zlib)
 DUMP: mapping (Pass I) [regular files]
 DUMP: mapping (Pass II) [directories]
 DUMP: estimated 40454 blocks.
 DUMP: Volume 1 started with block 1 at: Mon May 21 10:34:33 2007
 DUMP: dumping (Pass III) [directories]
 DUMP: dumping (Pass IV) [regular files]
 DUMP: Closing /tmp/lvtest.dump
 DUMP: Volume 1 completed at: Mon May 21 10:34:44 2007
 DUMP: Volume 1 took 0:00:11
 DUMP: Volume 1 transfer rate: 3056 kB/s
 DUMP: Volume 1 40530kB uncompressed, 33626kB compressed, 1.206:1
 DUMP: 40530 blocks (39.58MB) on 1 volume(s)
 DUMP: finished in 11 seconds, throughput 3684 kBytes/sec
 DUMP: Date of this level dump: Mon May 21 10:34:31 2007
 DUMP: Date this dump completed: Mon May 21 10:34:44 2007
 DUMP: Average transfer rate: 3056 kB/s
 DUMP: Wrote 40530kB uncompressed, 33626kB compressed, 1.206:1
 DUMP: DUMP IS DONE
# ls -lh /tmp/lvtest.dump
-rw-r--r-- 1 root root 33M 05-21 10:34 /tmp/lvtest.dump
# mkfs.ext3 /dev/mapper/vgdata-lvtest
# mount /dev/mapper/vgdata-lvtest /misc
# cd /misc
# restore rf /tmp/lvtest.dump
Dump tape is compressed.
/dc50/sbin/restore: ./lost+found: File exists
[root@mlsx misc]# ls
boot.b initrd-2.6.18.3-52.img memtest86+-1.65 System.map-2.6.18.3-52smp
vmlinuz-2.6.18.3-52smp
chain.b initrd-2.6.18.3-52smp.img message System.map-2.6.20.6-2
vmlinuz-2.6.20.6-2
config-2.6.18.3-52 initrd-2.6.20.6-2.img module-info
System.map-2.6.20-ovz005.1 vmlinuz-2.6.20-ovz005.1
config-2.6.18.3-52smp initrd-2.6.20-ovz005.1.img newinitrd.img
System.map-2.6.9-42.7AX vmlinuz-2.6.9-42.7AX
config-2.6.20.6-2 initrd-2.6.9-42.7AX.img os2_d.b
vmlinux-2.6.20-ovz005.1
config-2.6.9-42.7AX initrd.img restoresymtable vmlinuz
grub lost+found System.map-2.6.18.3-52 vmlinuz-2.6.18.3-52
</code></pre>

<p>从上面的例子来看，似乎 dump/restore 的使用方式和 tar 差不多，但是没有 tar 那么具有亲和力，毕竟 tar 是更加通俗的备份工具。但是从技术角度来说，dump/restore 和 tar 存在质的却别：dump/restore 是基于块设备的备份方式，而 tar 则是同时文件系统。这样的话，理论上
dump 的速度应该比 tar 的速度要块写。而且因为是从块设备备份，因此也更灵活，提供的参数也特别多。当时说到备份恢复，在 Unix 和
Linux 系统中，有太多的工具了。除了这两者外，还有一些不太常见的，比如 cpio，这个文件格式在 Oracle 官方提供的介质下载中能看到，还有一个
pax，Portable Archive eXchange 的缩写。有关备份的工具，我找到一篇文档，大家可以看看</p>

<blockquote><p>Unix 系統基本的備份與回復工具—dump 及 restorerunuser:   用指定的账号或者组来运行一个 shell，类似 su 程序，但是他没有密码提示。上面的解释是 man 手册中的翻译，后面的哪个密码提示不怎么好理解，为什么呢？我们知道 su 程序从 root 账号切换到其他账号是不需要密码的，而普通账号之前的切换或者从普通账号切换到 root 账号，你需要提供密码的。  因为能从普通账号切换到 root 账号，因此意味着 su 命令是具有 setuid 的，而 runuser 却没有。所以当在 root 账号下执行 runuser test 是没有问题的，立刻切换到账号 test 环境下，但是这个时候你是无法从 test 账号切换切换到任何账号的，他会给你权限不够的提示。当然即便提供输入密码，也没戏，因为 runuser 是一个普通命令，没有 setuid 位，那就无法从普通账号切换了。所以我不清楚了有 su 这样的命令后，为什么还需要 runuser 这样的命令，历史原因？向后兼容？Unix 有？r 开头的其他命令这里不说了，有好几个是于 reiser 文件系统相关的命令，自从 reiser 文件系统的作者背叛谋杀妻子罪成立后，reiser 文件系统的命运就不好说了，据说作者准备出售 reiser 文件系统的版权来打官司。唉，还是等等看吧。另外就是 rmmod 命令，这是内核驱动卸载命令，我记得很早前的 rmmod 是 insmod 命令的一个软连接，现在不是了，看来他们分家了。但是分家的原因未知。rfmond 是 RedFlag 系统特有的，是红旗系统日志收集后台程序，前台是 GUI 界面的。rpc 开头的命令不少，这些命令更多的应该是被其他 rpc 应用程序来调用，比如 smb，比如 nfs。runlevel 比较熟悉，参数也仅有一个，它是从/var/run/utmp 文件中猜着当前运行的级别和之前运行的级别。比如你是在 3 级别登录的，然后执行 startx，然后你运行 runlevel，那么他给出的答案是 5 3 表示现在是 5 级别，之前是 3 级别。其实从 3 级别执行 startx 来启动图形级别，我更愿意说是在 3 级别启动了一个应用程序，这是这个应用程序比较特别，是一个 X-windows，从命令角度来说，他应该和在 3 级别执行 ls 等命令没有什么差别。所以我倒不希望 startx 后，运行 runlevel 给出是答案是 5 3,我期望是 3.这样 startx 这个命令本身就没有什么特别性了。我这里来说，是比较好向 Linux 新手解释 Linux 的 X-windows。我理解的从 3 级别到 5 级别应该采用最原始，最传统的 init 5 命令。</p></blockquote>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">wgzhao</span></span>

      








  


<time datetime="2007-05-21T00:00:00+08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/categories/linuxji-zhu/'>Linux技术</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://wgzhao.github.io/2007/05/21/commands-start-r/" data-via="mlsx" data-counturl="http://wgzhao.github.io/2007/05/21/commands-start-r/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2007/05/17/what-can-help-noapic-and-acpioff/" title="Previous Post: noapic和acpi=off能帮我做到什么？">&laquo; noapic和acpi=off能帮我做到什么？</a>
      
      
        <a class="basic-alignment right" href="/2007/05/25/Car-Owners-Group/" title="Next Post: 有车一族">有车一族 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2014/03/18/compile-tmux-1-dot-9a-statically/">静态编译tmux 1.9a版本</a>
      </li>
    
      <li class="post">
        <a href="/2014/03/16/move-to-github/">Move to Github</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
  </ul>
</section>
<section>
<h1>QR-Code</h1>
<a href="/2007/05/21/commands-start-r/"><img src="http://chart.apis.google.com/chart?chs=150x150&cht=qr&chld=|0&chco=165B94&chl=/2007/05/21/commands-start-r/" alt="post-qrcode"></a></section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/categories/linuxji-zhu/'>Linux技术 (152)</a></li><li><a href='/categories/webkai-fa/'>WEB开发 (6)</a></li><li><a href='/categories/wo-du-wo-shu/'>我读我书 (16)</a></li><li><a href='/categories/ji-zhu-ji-qiao/'>技术技巧 (29)</a></li><li><a href='/categories/shu-ju-ku/'>数据库 (8)</a></li><li><a href='/categories/sui-xin-suo-xiang/'>随心所想 (113)</a></li></ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - wgzhao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wgzhao';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://wgzhao.github.io/2007/05/21/commands-start-r/';
        var disqus_url = 'http://wgzhao.github.io/2007/05/21/commands-start-r/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
