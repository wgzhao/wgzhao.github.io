
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>\[/sbin学习\]r\*命令 - Linux系统管理</title>
  <meta name="author" content="wgzhao">

  
  <meta name="description" content="/sbin下的q开头的命令只有两个，quotacheck和quotaon，其中quotaoff是quotaon的软连接。
这是和磁盘配额有关的命令，详细情况可以参考Linux下的配额配置手册。 r开头的命令稍微多些，有25个，不过有7个是软连接。 restore： &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wgzhao.github.io/2007/05/21/commands-start-r">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Linux系统管理" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux系统管理</a></h1>
  
    <h2>关注Linux系统管理，运维开发以及大数据</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wgzhao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">\[/sbin学习\]r\*命令</h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-05-21T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p><code>/sbin</code>下的q开头的命令只有两个，quotacheck和quotaon，其中quotaoff是quotaon的软连接。
这是和磁盘配额有关的命令，详细情况可以参考Linux下的配额配置手册。</p>

<p>r开头的命令稍微多些，有25个，不过有7个是软连接。</p>

<!--more-->


<p>restore：  从dump出来的备份恢复到文件系统中，我仅测试了一个例子，看上去一切正常，不过从这个例子。如果不考虑一些特别因素，那么dump/restore的使用方法是很简单的，下面是我测试的例子</p>

<pre><code> #mount /dev/mapper/vgdata-lvtest /misc
 #cp -a /boot/* /misc/
 #umount /misc
 #dump z9 -f /tmp/lvtest.dump /dev/mapper/vgdata-lvtest
 DUMP: Date of this level dump: Mon May 21 10:34:31 2007
 DUMP: Dumping /dev/mapper/vgdata-lvtest (an unlisted file system) to       /tmp/lvtest.dump
 DUMP: Label: none
 DUMP: Writing 10 Kilobyte records
 DUMP: Compressing output at compression level 9 (zlib)
 DUMP: mapping (Pass I) [regular files]
 DUMP: mapping (Pass II) [directories]
 DUMP: estimated 40454 blocks.
 DUMP: Volume 1 started with block 1 at: Mon May 21 10:34:33 2007
 DUMP: dumping (Pass III) [directories]
 DUMP: dumping (Pass IV) [regular files]
 DUMP: Closing /tmp/lvtest.dump
 DUMP: Volume 1 completed at: Mon May 21 10:34:44 2007
 DUMP: Volume 1 took 0:00:11
 DUMP: Volume 1 transfer rate: 3056 kB/s
 DUMP: Volume 1 40530kB uncompressed, 33626kB compressed, 1.206:1
 DUMP: 40530 blocks (39.58MB) on 1 volume(s)
 DUMP: finished in 11 seconds, throughput 3684 kBytes/sec
 DUMP: Date of this level dump: Mon May 21 10:34:31 2007
 DUMP: Date this dump completed: Mon May 21 10:34:44 2007
 DUMP: Average transfer rate: 3056 kB/s
 DUMP: Wrote 40530kB uncompressed, 33626kB compressed, 1.206:1
 DUMP: DUMP IS DONE
# ls -lh /tmp/lvtest.dump
-rw-r--r-- 1 root root 33M 05-21 10:34 /tmp/lvtest.dump
# mkfs.ext3 /dev/mapper/vgdata-lvtest
# mount /dev/mapper/vgdata-lvtest /misc
# cd /misc
# restore rf /tmp/lvtest.dump
Dump tape is compressed.
/dc50/sbin/restore: ./lost+found: File exists
[root@mlsx misc]# ls
boot.b initrd-2.6.18.3-52.img memtest86+-1.65 System.map-2.6.18.3-52smp
vmlinuz-2.6.18.3-52smp
chain.b initrd-2.6.18.3-52smp.img message System.map-2.6.20.6-2
vmlinuz-2.6.20.6-2
config-2.6.18.3-52 initrd-2.6.20.6-2.img module-info
System.map-2.6.20-ovz005.1 vmlinuz-2.6.20-ovz005.1
config-2.6.18.3-52smp initrd-2.6.20-ovz005.1.img newinitrd.img
System.map-2.6.9-42.7AX vmlinuz-2.6.9-42.7AX
config-2.6.20.6-2 initrd-2.6.9-42.7AX.img os2_d.b
vmlinux-2.6.20-ovz005.1
config-2.6.9-42.7AX initrd.img restoresymtable vmlinuz
grub lost+found System.map-2.6.18.3-52 vmlinuz-2.6.18.3-52
</code></pre>

<p>从上面的例子来看，似乎dump/restore的使用方式和tar差不多，但是没有tar那么具有亲和力，毕竟tar是更加通俗的备份工具。但是从技术角
度来说，dump/restore和tar存在质的却别：dump/restore是基于块设备的备份方式，而tar则是同时文件系统。这样的话，理论上
dump的速度应该比tar的速度要块写。而且因为是从块设备备份，因此也更灵活，提供的参数也特别多。
当时说到备份恢复，在Unix和
Linux系统中，有太多的工具了。除了这两者外，还有一些不太常见的，比如cpio，这个文件格式在Oracle官方提供的介质下载中能看到，还有一个
pax，Portable Archive eXchange的缩写。有关备份的工具，我找到一篇文档，大家可以看看</p>

<blockquote><p>Unix系統基本的備份與回復工具—dump及restorerunuser:   用指定的账号或者组来运行一个shell，类似su程序，但是他没有密码提示。上面的解释是man手册中的翻译，后面的哪个密码提示不怎么好理解，为什么呢？我们知道su程序从root账号切换到其他账号是不需要密码的，而普通账号之前的切换或者从普通账号切换到root账号，你需要提供密码的。  因为能从普通账号切换到root账号，因此意味着su命令是具有setuid的，而runuser却没有。所以当在root账号下执行runuser test是没有问题的，立刻切换到账号test环境下，但是这个时候你是无法从test账号切换切换到任何账号的，他会给你权限不够的提示。当然即便提供输入密码，也没戏，因为runuser是一个普通命令，没有setuid位，那就无法从普通账号切换了。所以我不清楚了有su这样的命令后，为什么还需要runuser这样的命令，历史原因？向后兼容？Unix有？r开头的其他命令这里不说了，有好几个是于reiser文件系统相关的命令，自从reiser文件系统的作者背叛谋杀妻子罪成立后，reiser文件系统的命运就不好说了，据说作者准备出售reiser文件系统的版权来打官司。唉，还是等等看吧。另外就是rmmod命令，这是内核驱动卸载命令，我记得很早前的rmmod是insmod命令的一个软连接，现在不是了，看来他们分家了。但是分家的原因未知。rfmond是RedFlag系统特有的，是红旗系统日志收集后台程序，前台是GUI界面的。rpc开头的命令不少，这些命令更多的应该是被其他rpc应用程序来调用，比如smb，比如nfs。runlevel比较熟悉，参数也仅有一个，它是从/var/run/utmp文件中猜着当前运行的级别和之前运行的级别。比如你是在3级别登录的，然后执行startx，然后你运行runlevel，那么他给出的答案是5 3表示现在是5级别，之前是3级别。其实从3级别执行startx来启动图形级别，我更愿意说是在3级别启动了一个应用程序，这是这个应用程序比较特别，是一个X-windows，从命令角度来说，他应该和在3级别执行ls等命令没有什么差别。所以我倒不希望startx后，运行runlevel给出是答案是5 3,我期望是3.这样startx这个命令本身就没有什么特别性了。我这里来说，是比较好向Linux新手解释Linux的X-windows。我理解的从3级别到5级别应该采用最原始，最传统的init 5命令。</p></blockquote>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">wgzhao</span></span>

      








  


<time datetime="2007-05-21T00:00:00+08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='//categories/linuxji-zhu/'>Linux技术</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://wgzhao.github.io/2007/05/21/commands-start-r/" data-via="mlsx" data-counturl="http://wgzhao.github.io/2007/05/21/commands-start-r/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2007/05/17/what-can-help-noapic-and-acpioff/" title="Previous Post: noapic和acpi=off能帮我做到什么？">&laquo; noapic和acpi=off能帮我做到什么？</a>
      
      
        <a class="basic-alignment right" href="/2007/05/25/Car-Owners-Group/" title="Next Post: 有车一族">有车一族 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2014/03/16/move-to-github/">Move to Github</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/21/explaining-the-postgresql-query-optimizer/">PostgreSQL查询优化简介</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/wgzhao">@wgzhao</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'wgzhao',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/wgzhao?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/wgzhao">My Delicious Bookmarks &raquo;</a></p>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - wgzhao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wgzhao';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://wgzhao.github.io/2007/05/21/commands-start-r/';
        var disqus_url = 'http://wgzhao.github.io/2007/05/21/commands-start-r/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
