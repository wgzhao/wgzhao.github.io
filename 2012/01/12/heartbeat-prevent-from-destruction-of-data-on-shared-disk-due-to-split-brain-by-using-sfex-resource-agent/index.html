<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>用sfex资源脚本来防止HA脑裂后共享磁盘数据被损坏的风险 | Linux系统管理</title>
  <meta name="author" content="wgzhao">
  
  <meta name="description" content="Linux,SA,DBA,bigdata">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="用sfex资源脚本来防止HA脑裂后共享磁盘数据被损坏的风险"/>
  <meta property="og:site_name" content="Linux系统管理"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Linux系统管理" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Linux系统管理</a></h1>
  <h2><a href="/">关注Linux系统管理，运维开发以及大数据</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-01-12T06:53:00.000Z"><a href="/2012/01/12/heartbeat-prevent-from-destruction-of-data-on-shared-disk-due-to-split-brain-by-using-sfex-resource-agent/">1月 12 2012</a></time>
      
      
  
    <h1 class="title">用sfex资源脚本来防止HA脑裂后共享磁盘数据被损坏的风险</h1>
  

    </header>
    <div class="entry">
      
        <p>在<a href="http://zh.wikipedia.org/wiki/HA" title="High Availability" target="_blank">HA</a>部署众, 心跳无疑是最重要的组件，因此心跳也绝大部分你情况是冗余的，大部分都是用网络做心跳介质，因此一般认为是可靠的。但是，所有的事情都有意外，如果心跳出现了故障，到时<a href="http://zh.wikipedia.org/wiki/HA" title="High Availability" target="_blank">HA</a>环境中的节点互相直接之间无法通信，就会出现脑裂 (Split Brain) 现象，出现这种情况后，会导致<a href="http://zh.wikipedia.org/wiki/HA" title="High Availability" target="_blank">HA</a>监控的服务会在多个节点上同时运行，如果此时有共享存储，则会导致共享存储在多个节点上同时可写挂载，从而导致文件系统崩溃，数据丢失。这显然不是可以接受的情况。<br><a id="more"></a><br>开源<a href="http://zh.wikipedia.org/wiki/HA" title="High Availability" target="_blank">HA</a>解决方案—<a href="http://linux-ha.org/wiki/Heartbeat" title="Heartbeat" target="_blank">Heartbeat</a>—解决这个问题的方案是使用成为<a href="http://linux-ha.org/wiki/Fencing" title="Fencing" target="_blank">Fence</a>的设备，也就是电源管理设备，当发生脑裂情况时，<a href="http://linux-ha.org/wiki/Heartbeat" title="Heartbeat" target="_blank">Heartbeat</a>通知电源设备关闭该节点。目前绝大部分服务器都自带了这样的设备。</p>
<p>虽然都自带了，但我必须承认，到目前为止，我真的还没有在<a href="http://linux-ha.org/wiki/Heartbeat" title="Heartbeat" target="_blank">Heartbeat</a>上部署过。我也一直在找一个靠谱的纯软件解决方案。这几天测试了<a href="http://linux-ha.org/wiki/Heartbeat" title="Heartbeat" target="_blank">Heartbeat</a>自带的<a href="http://www.linux-ha.org/wiki/Sfex_(resource_agent)" title="Shared Disk EXclusiveness control Program" target="_blank">SFEX</a> 工具，发现基本上可以帮我们防止因脑裂带来的共享磁盘存在数据解构的风险。<a href="http://www.linux-ha.org/wiki/Sfex_(resource_agent)" title="Shared Disk EXclusiveness control Program" target="_blank">SFEX</a>的原理是在一个独立的共享存储上的一个分区上写上锁信息，在一个分区上可以有多个锁信息（通过 sfex_init -n 来指定），每一个锁信息可以对应一个数据分区。然后把 Filesystem 资源配置为依赖<a href="http://www.linux-ha.org/wiki/Sfex_(resource_agent)" title="Shared Disk EXclusiveness control Program" target="_blank">SFEX</a>资源，这样每次需要挂载数据分区时，都需要预先去读取锁信息，如果能获得锁信息，则可以挂载，否则不能挂载。 </p>
<h2 id=" 基本概念 ">基本概念</h2>
<ul>
<li><a href="http://www.linux-ha.org/wiki/Sfex_(resource_agent)" title="Shared Disk EXclusiveness control Program" target="_blank">SFEX</a>, 即 Shared Disk File EXclusiveness Control Pogram，被定位一种<a href="http://www.linux-ha.org/wiki/OCF_Resource_Agents" title="Open Cluster Framework" target="_blank">OCF</a>资源，用于控制共享磁盘的所有权。</li>
<li><a href="http://www.linux-ha.org/wiki/Sfex_(resource_agent)" title="Shared Disk EXclusiveness control Program" target="_blank">SFEX</a> 在共享磁盘上使用一个特定的分区, 用来维护下列数据:<ul>
<li>“status” 显示当前共享磁盘属于谁?</li>
<li>“node” 显示所有权节点名称</li>
<li>“count” 用于判断拥有者节点是否运行</li>
</ul>
</li>
<li>通常把使用共享存储上的数据分区的资源 (比如 PostgreSQL) 和<a href="http://www.linux-ha.org/wiki/Sfex_(resource_agent)" title="Shared Disk EXclusiveness control Program" target="_blank">SFEX</a>配置在一个组资源里</li>
<li>所有权节点可以访问数据分区</li>
</ul>
<p><img src="http://farm8.staticflickr.com/7023/6683231303_e3e2eef26b.jpg" alt="sfex0"></p>
<ul>
<li>什么时候可以获得所有权<ul>
<li>无人有所有权</li>
<li>节点能够判断另外一个节点已经宕机</li>
</ul>
</li>
</ul>
<h2 id=" 时序图 ">时序图</h2>
<h3 id=" 启动过程 ">启动过程</h3>
<p><a href="http://www.linux-ha.org/wiki/Sfex_(resource_agent)" title="Shared Disk EXclusiveness control Program" target="_blank">SFEX</a>可以在分值最高的节点上运行，此时，其他节点则无法同时访问共享存储（无法获得锁)</p>
<h4 id="Node_A">Node A</h4>
<ol>
<li>SFEX 从共享存储上读取数据从而获得”status”，通常”status”是”NO_OWNED”，表示当前没有节点有所有权。</li>
<li>写数据到共享存储，内容包括”node=Node A” 和”status=OWNED”</li>
<li>重读数据, 获得”node=Node A”</li>
<li>比较节点名是不是和当前节点一致, 如果节点名没有改变, 则 Node A 获得所有权</li>
<li>SFEX 在监控共享存储的过程中增加”count”值, 表明所有权节点在线</li>
</ol>
<p><img src="http://farm8.staticflickr.com/7008/6683231135_abcd4efb32.jpg" alt="sfex_seq4_st_access"></p>
<h3 id=" 心跳通信失败 ">心跳通信失败</h3>
<h4 id="Node_A-1">Node A</h4>
<ol>
<li>SFEX 通过心跳监控进程更新所有权</li>
</ol>
<h4 id="Node_B">Node B</h4>
<ol>
<li>当心跳通信失败时, 待命 (stand by) 节点 (Node B) 开始启动资源</li>
<li>SFEX 从共享存储上读取数据</li>
<li>等待一会儿，等待时间应该长于 sfex 监控间隔 (interval)，在等待期间，它定期等待 Node A 的更新，以确保 Node A 还在维护所有权</li>
<li>重新读取数据</li>
<li>检查”count”的新值，当两个”count”有差别时，它会认为 Node A 还在线</li>
<li>SFEX 启动进程停止</li>
</ol>
<p><img src="http://farm8.staticflickr.com/7163/6683230921_b70a739c6d.jpg" alt="sfex_seq3_nodedown"></p>
<h3 id=" 活动节点失效 ">活动节点失效</h3>
<h4 id="Node_A-1">Node A</h4>
<ol>
<li>Node A 失效</li>
</ol>
<h4 id="Node_B-1">Node B</h4>
<ol>
<li>等待一会，等待 Node A 定期更新，但此时发现 Node A 没有更新</li>
<li>SFEX 重新读取数据</li>
<li>检查”count”的新值，发现两个值相同，于是它认为 Node A 已经失效了 (down)</li>
<li>写数据到共享存储，内容包括”node=Node B” 和 “status=OWNED”</li>
<li>重读数据, 获得”node=Node B”</li>
<li>比较节点名是不是和当前节点一致, 如果节点名没有改变, 则 Node B 获得所有权</li>
<li>然后启动后续资源</li>
</ol>
<p><img src="http://farm8.staticflickr.com/7169/6683230701_2bf943a5b7.jpg" alt="sfex_seq2_hbdown"></p>
<h2 id=" 配置步骤 ">配置步骤</h2>
<h3 id=" 创建特定分区 ">创建特定分区</h3>
<p>首先, 需要在共享存储上划出一个单独的小分区出来, 不用多大, 一个节点仅需要 1Kb。因此 100M 足够了。假定是<code>/dev/sdb1</code>。</p>
<h3 id=" 初始化 ">初始化</h3>
<p><a href="http://www.linux-ha.org/wiki/Sfex_(resource_agent)" title="Shared Disk EXclusiveness control Program" target="_blank">SFEX</a>提供了<code>sfex_init</code>指令来初始化特定分区，使用方式如下<br><code>sfex_init -n 2 /dev/sdb1</code><br><code>-n</code>表示能创建多少个锁。假定你有 2 个数据分区，那就需要 2 个锁。<br>注意，一旦初始化后，不能再增加锁的数量（暂时我没有看到如何增加）。因此要考虑数据分区的扩展性，所以建议多初始化几个锁。</p>
<h3 id=" 测试分区 ">测试分区</h3>
<p><a href="http://www.linux-ha.org/wiki/Sfex_(resource_agent)" title="Shared Disk EXclusiveness control Program" target="_blank">SFEX</a>提供了<code>sfex_state</code>指令来测试分区信息是否有效，指令使用及输出结果如下：  </p>
<pre><code>    <span class="preprocessor"># sfex_stat -i 1 /dev/sdb1</span>
    control data:
    magic: <span class="number">0x53</span>, <span class="number">0x46</span>, <span class="number">0x45</span>, <span class="number">0x58</span>
    version: <span class="number">1</span>
    revision: <span class="number">3</span>
    blocksize: <span class="number">512</span>
    numlocks: <span class="number">3</span>
    <span class="keyword">lock</span> data <span class="preprocessor">#1:</span>
    status: <span class="keyword">lock</span>
    count: <span class="number">393</span>
    nodename: tsd1
    status <span class="keyword">is</span> UNLOCKED
</code></pre><p><code>-i 1</code>表示锁的位置，从 1 开始，以此类推。</p>
<h3 id=" 配置 HA">配置 HA</h3>
<p>这个步骤就和平常没有什么区别了，每一个<code>Filesystem</code>资源，对应一个<code>sfex</code>资源，比如我测试的环境的<code>crm configure show</code>的部分结果如下：</p>
<pre><code>    primitive prmData ocf:heartbeat:Filesystem <span class="subst">\</span>
        <span class="keyword">params</span> device<span class="subst">=</span><span class="string">"/dev/sdb2"</span> fstype<span class="subst">=</span><span class="string">"ext4"</span> directory<span class="subst">=</span><span class="string">"/misc"</span> <span class="subst">\</span>
        op monitor interval<span class="subst">=</span><span class="string">"3"</span> <span class="subst">\</span>
        meta target<span class="attribute">-role</span><span class="subst">=</span><span class="string">"Started"</span>
    primitive prmEx ocf:heartbeat:sfex <span class="subst">\</span>
        <span class="keyword">params</span> collision_timeout<span class="subst">=</span><span class="string">"1"</span> lock_timeout<span class="subst">=</span><span class="string">"70"</span> monitor_interval<span class="subst">=</span><span class="string">"10"</span> <span class="subst">\</span>
        index<span class="subst">=</span><span class="string">"1"</span> device<span class="subst">=</span><span class="string">"/dev/sdb1"</span>  monitor interval<span class="subst">=</span><span class="string">"10"</span>
    primitive sfex2 ocf:heartbeat:sfex <span class="subst">\</span>
        <span class="keyword">params</span> collision_timeout<span class="subst">=</span><span class="string">"5"</span> lock_timeout<span class="subst">=</span><span class="string">"20"</span> index<span class="subst">=</span><span class="string">"2"</span> device<span class="subst">=</span><span class="string">"/dev/sdb1"</span> <span class="subst">\</span>
        op monitor interval<span class="subst">=</span><span class="string">"10"</span>
    primitive sfex2data ocf:heartbeat:Filesystem <span class="subst">\</span>
        <span class="keyword">params</span> device<span class="subst">=</span><span class="string">"/dev/sdb3"</span> fstype<span class="subst">=</span><span class="string">"ext4"</span> directory<span class="subst">=</span><span class="string">"/sfex2data"</span> <span class="subst">\</span>
        op monitor interval<span class="subst">=</span><span class="string">"10"</span>
    <span class="keyword">group</span> grp1 prmEx prmData
    <span class="keyword">group</span> grp2 sfex2 sfex2data
</code></pre><p><code>prmEx</code> 和 <code>prmData</code> 是两个<code>sfex</code>资源，使用的锁位置分别是 1 和 2。<br>当前 HA 状态信息如下：  </p>
<pre><code>    <span class="constant">Last</span> <span class="symbol">updated:</span> <span class="constant">Thu</span> <span class="constant">Jan</span> <span class="number">12</span> <span class="number">18</span><span class="symbol">:</span><span class="number">07</span><span class="symbol">:</span><span class="number">11</span> <span class="number">2012</span>
    <span class="constant">Last</span> <span class="symbol">change:</span> <span class="constant">Fri</span> <span class="constant">Jan</span> <span class="number">13</span> <span class="number">00</span><span class="symbol">:</span><span class="number">27</span><span class="symbol">:</span><span class="number">19</span> <span class="number">2012</span>
    <span class="constant">Stack</span><span class="symbol">:</span> <span class="constant">Heartbeat</span>
    <span class="constant">Current</span> <span class="constant">DC</span><span class="symbol">:</span> tsd1 (<span class="number">424</span>e04a8-0b7c-<span class="number">4</span>d6a-<span class="number">85</span>cb-f005cbd1702d) - partition with quorum
    <span class="constant">Version</span><span class="symbol">:</span> <span class="number">1.1</span>.<span class="number">6</span>-<span class="number">1</span>.fc15-b379478e0a66af52708f56d0302f50b6f13322bd
    <span class="number">2</span> <span class="constant">Nodes</span> configured, unknown expected votes
    <span class="number">4</span> <span class="constant">Resources</span> configured.
    ============

    <span class="constant">Online</span><span class="symbol">:</span> [ wgzhao-nb tsd1 ]

    <span class="constant">Resource</span> <span class="constant">Group</span><span class="symbol">:</span> grp1
         prmEx    (<span class="symbol">ocf:</span><span class="symbol">:heartbeat</span><span class="symbol">:sfex</span>)<span class="symbol">:</span>    <span class="constant">Started</span> tsd1
         prmData    (<span class="symbol">ocf:</span><span class="symbol">:heartbeat</span><span class="symbol">:Filesystem</span>)<span class="symbol">:</span>    <span class="constant">Started</span> tsd1
    <span class="constant">Resource</span> <span class="constant">Group</span><span class="symbol">:</span> grp2
         sfex2    (<span class="symbol">ocf:</span><span class="symbol">:heartbeat</span><span class="symbol">:sfex</span>)<span class="symbol">:</span>    <span class="constant">Started</span> wgzhao-nb
         sfex2data    (<span class="symbol">ocf:</span><span class="symbol">:heartbeat</span><span class="symbol">:Filesystem</span>)<span class="symbol">:</span>    <span class="constant">Started</span> wgzhao-nb
</code></pre><h3 id=" 心跳失效模拟测试 ">心跳失效模拟测试</h3>
<p>当前<code>prmEx</code>的锁所有权在<code>tsd1</code>节点上，<code>sfex2</code>在<code>wgzhao-nb</code>上。我们做一个手工模拟心跳失效测试，就是我们希望手工在<code>wgzhao-nb</code>上获得<code>prmEx</code>的锁。  </p>
<p>首先导出 OCF 的相关环境变量  </p>
<pre><code>    export OCF_ROOT=/usr/lib/ocf
    export OCF_RESKEY_device=/dev/sdb1
    export OCF_RESKEY_index=1
    ./sfex <span class="operator"><span class="keyword">start</span>
    sfex[<span class="number">11849</span>]: INFO: sfex_daemon: starting...
    sfex[<span class="number">11849</span>]: DEBUG: sfex_monitor: started...
    sfex[<span class="number">11849</span>]: DEBUG: sfex_monitor: complete. sfex_daemon <span class="keyword">is</span> <span class="keyword">not</span> running.
    sfex[<span class="number">11849</span>]: ERROR: sfex_daemon failed <span class="keyword">to</span> <span class="keyword">start</span>.</span>
</code></pre><p>从上述结果可以看出，如果心跳出现了故障，尝试在两个节点同时启动时，<code>sfex</code>报错，返回值为 1，表示请求锁超时，这表明当一个节点已经获得所有权后，另外一个节点无法获得锁。</p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/Linux技术/">Linux技术</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/heartbeat/">heartbeat</a>, <a href="/tags/ra/">ra</a>, <a href="/tags/split-brain/">split-brain</a>, <a href="/tags/sfex/">sfex</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=null";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://wgzhao.com/2012/01/12/heartbeat-prevent-from-destruction-of-data-on-shared-disk-due-to-split-brain-by-using-sfex-resource-agent/" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:wgzhao.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Linux技术/">Linux技术</a><small>152</small></li>
  
    <li><a href="/categories/WEB开发/">WEB开发</a><small>5</small></li>
  
    <li><a href="/categories/Linux技术/WEB开发/">WEB开发</a><small>1</small></li>
  
    <li><a href="/categories/lsb/init/">init</a><small>1</small></li>
  
    <li><a href="/categories/lsb/init/linux/">linux</a><small>1</small></li>
  
    <li><a href="/categories/lsb/">lsb</a><small>1</small></li>
  
    <li><a href="/categories/vsftp/mysql/">mysql</a><small>1</small></li>
  
    <li><a href="/categories/vsftp/mysql/pam_mysql/">pam_mysql</a><small>1</small></li>
  
    <li><a href="/categories/plan/">plan</a><small>1</small></li>
  
    <li><a href="/categories/strace/">strace</a><small>1</small></li>
  
    <li><a href="/categories/plan/summary/">summary</a><small>1</small></li>
  
    <li><a href="/categories/strace/sys call/">sys call</a><small>1</small></li>
  
    <li><a href="/categories/strace/sys call/troubleshooting/">troubleshooting</a><small>1</small></li>
  
    <li><a href="/categories/vsftp/">vsftp</a><small>1</small></li>
  
    <li><a href="/categories/我读我书/">我读我书</a><small>11</small></li>
  
    <li><a href="/categories/Linux技术/我读我书/">我读我书</a><small>5</small></li>
  
    <li><a href="/categories/技术技巧/">技术技巧</a><small>25</small></li>
  
    <li><a href="/categories/Linux技术/技术技巧/">技术技巧</a><small>4</small></li>
  
    <li><a href="/categories/数据库/">数据库</a><small>8</small></li>
  
    <li><a href="/categories/随心所想/">随心所想</a><small>111</small></li>
  
    <li><a href="/categories/我读我书/随心所想/">随心所想</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li>
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li>
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
      <li>
        <a href="/2012/08/21/explaining-the-postgresql-query-optimizer/">PostgreSQL查询优化简介</a>
      </li>
    
      <li>
        <a href="/2012/08/20/several-popular-nosql-databases-key-features-list/">几种常见的NoSQL数据库关键特性列表</a>
      </li>
    
  </ul>
</div>


  
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12">十二月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08">八月 2012</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04">四月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01">一月 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09">九月 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08">八月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04">四月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03">三月 2011</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08">八月 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07">七月 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06">六月 2010</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05">五月 2010</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04">四月 2010</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03">三月 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/02">二月 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01">一月 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/12">十二月 2009</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/11">十一月 2009</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/10">十月 2009</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/09">九月 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/08">八月 2009</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/07">七月 2009</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/04">四月 2009</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/03">三月 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/02">二月 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/01">一月 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/12">十二月 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/09">九月 2008</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/08">八月 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/07">七月 2008</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/06">六月 2008</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/05">五月 2008</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/04">四月 2008</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/03">三月 2008</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/02">二月 2008</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/01">一月 2008</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/12">十二月 2007</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/11">十一月 2007</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/10">十月 2007</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/09">九月 2007</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/08">八月 2007</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/07">七月 2007</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/06">六月 2007</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/05">五月 2007</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/04">四月 2007</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/03">三月 2007</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/02">二月 2007</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/01">一月 2007</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/12">十二月 2006</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/11">十一月 2006</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/10">十月 2006</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/09">九月 2006</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/08">八月 2006</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/07">七月 2006</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/06">六月 2006</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/05">五月 2006</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/04">四月 2006</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/03">三月 2006</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/01">一月 2006</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/12">十二月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/11">十一月 2005</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/09">九月 2005</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/05">五月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/04">四月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/03">三月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/01">一月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/12">十二月 2004</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/10">十月 2004</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 wgzhao
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'wgzhao';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>