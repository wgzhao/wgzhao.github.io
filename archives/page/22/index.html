<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 22 页 | 归档 | Linux系统管理</title>
  <meta name="author" content="wgzhao">
  
  <meta name="description" content="Linux,SA,DBA,bigdata">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Linux系统管理"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Linux系统管理" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Linux系统管理</a></h1>
  <h2><a href="/">关注Linux系统管理，运维开发以及大数据</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">归档</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-02-11T16:00:00.000Z"><a href="/2007/02/12/what-intercity-bus-we-want/">2月 12 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/02/12/what-intercity-bus-we-want/">我需要什么样的城际公交</a></h1>
  

    </header>
    <div class="entry">
      
        <p>周六去湘潭，一改乘坐火车站附近的大巴的习惯，要去尝试刚开通不久的长株潭城际公交。<br>开始以为从长沙出发到湘潭和株洲的公交车应该在同一个出发点，结果到了东塘后，才发现这里仅仅是到株洲的公交，去往湘潭的，应该在侯家塘坐车。</p>
<p>又辗转到侯家塘，果然发现有辆公交车停在那里。之前看过报纸，说公交车全程是 5 块。结果今天一问，才发现全程是 14 块，到我我下车的地方是 11 块，大约是 2 块钱一站。相比从火车站附近的大巴 18 块的票价而言，也算便宜了 7 块钱，两人单次就是 14 块，来回一趟 28，算算似乎可以。于是就上车了。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2007/02/12/what-intercity-bus-we-want/#more" class="more-link">Read More &rarr;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-02-08T16:00:00.000Z"><a href="/2007/02/09/commands-start-g/">2月 9 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/02/09/commands-start-g/">\[/sbin学习\] g\*命令</a></h1>
  

    </header>
    <div class="entry">
      
        <p>/sbin 下 g 开头的命令如下：  </p>
<blockquote>
<p>generate-modprobe.conf getkey grub grub-install grub-terminfo genhostid<br>getmd grubby grub-md5-crypt</p>
</blockquote>
<p>generate-modprobe.conf:  将原来的 module.conf 文件迁移到 modprobe.conf 文件。这是 2.4 内核到 2.6 内核后驱动模块配置的一个改变。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2007/02/09/commands-start-g/#more" class="more-link">Read More &rarr;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-02-04T16:00:00.000Z"><a href="/2007/02/05/commands-start-f/">2月 5 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/02/05/commands-start-f/">\[/sbin学习\]f\*命令</a></h1>
  

    </header>
    <div class="entry">
      
        <p>/sbin 下 f 开头的命令如下</p>
<blockquote>
<p>fdisk fixfiles fsck.cramfs fsck.ext3 fsck.ocfs2 fsck.vfat fuser findfs<br>fsck fsck.ext2 fsck.msdos fsck.reiserfs fsck.xfs fxload </p>
</blockquote>
<p>其中 fsck.reiserfs 是 reiserfsck 命令的软连接，f 开头的命令中 fsck 命令套件占了绝大部分。<br>findfs: 根据标签 (label) 或者 UUID 号来查询文件系统。他会搜索整个磁盘，看是否有匹配的标签或者 UUID 没有，如果有，则打印到标注输出上。他也是<a href="http://e2fsprogs.sf.net" target="_blank">e2fsprogs</a>项目的一部分。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2007/02/05/commands-start-f/#more" class="more-link">Read More &rarr;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-02-02T16:00:00.000Z"><a href="/2007/02/03/Linux-memory-repeat-simple-calculation/">2月 3 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/02/03/Linux-memory-repeat-simple-calculation/">再说Linux内存简单计算</a></h1>
  

    </header>
    <div class="entry">
      
        <p>以前有两篇关于 linux 内存的文章</p>
<p>再来一篇简单易懂的，适合技术支持人员解释给对 Linux 内存管理有疑问的用户：</p>
<p>Linux 的基本原则是没有资源应该被浪费。因此核心会使用尽可能多的 RAM，来缓存来自本地和远程的文件系统的信息。系统做读写操作的时候，会将与当前运行的进程相关的数据尽量存储在 RAM 里。系统报告的缓存是缓冲和页缓存两者之和。缓存并不是在进程结束的时候被回收（你可能很快会启动另外一个进程，需要同样的数据），而是随需回收—比如，当你启动一个需要大量内存的进程时，Linux 核心会从内存中回收缓存，将得到的内存分配给新的进程。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2007/02/03/Linux-memory-repeat-simple-calculation/#more" class="more-link">Read More &rarr;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-01-30T16:00:00.000Z"><a href="/2007/01/31/commands-start-e/">1月 31 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/01/31/commands-start-e/">\[sbin学习\]e\*命令</a></h1>
  

    </header>
    <div class="entry">
      
        <p>/sbin/ 下 e 开头的命令比较多，列举如下：</p>
<pre><code>e2fsck el<span class="built_in">a_remove</span> elvtune evlfacility evlogmgr evSubagent
e2image el<span class="built_in">a_remove</span>_all ether-wake evlgentmpls evlogrmtd
e2label el<span class="built_in">a_show</span> ethtool evlnotify evlsend
el<span class="built_in">a_add</span> el<span class="built_in">a_show</span>_all evlactiond evlnotifyd evltc
el<span class="built_in">a_get</span>_atts el<span class="built_in">a_sig</span>_send evlconfig evlogd evlview
</code></pre><p>e2fsck：检查和修复 ext2/ext3 文件系统，这似乎是目前 Linux 下唯一一个对文件系统做修复的工具。</p>
<p>他同时也是一个双刃剑。在实际的文件系统修复经验中，我遇到了两难的问题。根文件系统损坏了，需要修复，系统会提示你要用 e2fsck 来修复。当然你可以按照他的提示去做，但是很可能，你会发现，等你修复完了，文件系统也能正常工作了，但是往往最重要的文件被修复得不加了。这不是开玩笑，而是有大量的案例。如果在修复和损坏之间取得一种平衡需要根据具体的情况来定夺。<br>e2fsck 接受的参数比较多，列举如下：<br>功能说明：检查 ext2 文件系统的正确性。<br> 参 数：<br> <pre><br> -a 不询问使用者意见，便自动修复文件系统<br> -b 指定 superblock，而不使用预设的 superblock<br> -B 指定区块的大小，单位为字节<br> -c 一并执行 badblocks，以标示损坏的区块<br> -C 将检查过程的信息完整记录在 file descriptor 中，使得整个检查<br> 过程都能完整监控<br> -d 显示排错信息<br> -f 即使文件系统没有错误迹象，仍强制地检查正确性<br> -F 执行前先清除设备的缓冲区<br> -l 将文件中指定的区块加到损坏区块列表<br> -L 先清除损坏区块列表，再将文件中指定的区块加到损坏区块<br> 列表。因此损坏区块列表的区块跟文件中指定的区块是一样的<br> -n 以只读模式开启文件系统，并采取非互动方式执行，所有的问题对<br> 话均设置以”no”回答<br> -p 不询问使用者意见，便自动修复文件系统<br> -r 此参数只为了兼容性而存在，并无实际作用<br> -s 如果文件系统的字节顺序不适当，就交换字节顺序，否则不做任何<br> 动作<br> -S 不管文件系统的字节顺序，一律交换字节顺序<br> -t 显示时间信息<br> -v 执行时显示详细的信息<br> -V 显示版本信息<br> -y 采取非互动方式执行，所有的问题均设置以”yes”回答。<br>e2fsck 执行后的传回值及代表意义如下：<br> 0 没有任何错误发生。<br> 1 文件系统发生错误，并且已经修正。<br> 2 文件系统发生错误，并且已经修正。<br> 4 文件系统发生错误，但没有修正。<br> 8 运作时发生错误。<br> 16 使用的语法发生错误。<br> 128 共享的函数库发生错误。<br></pre></p>
<p>e2image：保存关键的 ext2/ext3 文件系统到文件。<br>e2image 可以用来创建 ext2 和 ext3 文件系统的镜像。<br>e2image 只解释需要被镜像的文件系统，而不是保存原始 bit。<br>e2image 可以创建”raw”和”nomal”镜像，这两种方法都可以节约空间。<br>因此，用 e2image 创建的镜像同硬盘上的文件系统有不同的 hash，从这点上看，他是和 dd 命令不同的。<br>但是如何将 e2image 创建的备份恢复出来呢？这点在 e2image 的 help 和 man 手册中都没有提到<br>下面是一个实际的例子，分部创建了”raw”和”normal”镜像</p>
<pre><code>root<span class="property">@lancy</span> sbin]<span class="comment"># e2image /dev/sda1 /tmp/e2image.data</span>
e2image <span class="number">1.35</span> (<span class="number">28</span>-Feb-<span class="number">2004</span>)
[root<span class="property">@lancy</span> sbin]<span class="comment"># ls -lh /tmp/e2image.data</span>
-rw——- <span class="number">1</span> root root <span class="number">625</span>K <span class="number">1</span>月 <span class="number">31</span> <span class="number">21</span>:<span class="number">18</span> /tmp/e2image.data
[root<span class="property">@lancy</span> sbin]<span class="comment"># file /tmp/e2image.data</span>
/tmp/e2image.<span class="attribute">data</span>: Linux rev <span class="number">1.0</span> ext3 filesystem data
[root<span class="property">@lancy</span> sbin]<span class="comment"># mount /tmp/e2image.data /misc -oloop</span>
<span class="attribute">mount</span>: wrong fs type, bad option, bad superblock <span class="literal">on</span> /dev/loop0,
<span class="keyword">or</span> too many mounted file systems
(could <span class="keyword">this</span> be the IDE device where you <span class="keyword">in</span> fact use
ide-scsi so that sr0 <span class="keyword">or</span> sda <span class="keyword">or</span> so <span class="keyword">is</span> needed?)
[root<span class="property">@lancy</span> sbin]<span class="comment"># mount -r /tmp/e2image.data /tmp/e2image_raw_data</span>
<span class="attribute">mount</span>: mount point /tmp/e2image_raw_data does <span class="keyword">not</span> exist
[root<span class="property">@lancy</span> sbin]<span class="comment"># e2image -r /dev/sda1 /tmp/e2image_raw_data</span>
e2image <span class="number">1.35</span> (<span class="number">28</span>-Feb-<span class="number">2004</span>)
[root<span class="property">@lancy</span> sbin]<span class="comment"># ls -lh /tmp/e2image_raw_data</span>
-rw——- <span class="number">1</span> root root <span class="number">20</span>M <span class="number">1</span>月 <span class="number">31</span> <span class="number">21</span>:<span class="number">20</span> /tmp/e2image_raw_data
[root<span class="property">@lancy</span> sbin]<span class="comment"># file /tmp/e2image_raw_data</span>
/tmp/<span class="attribute">e2image_raw_data</span>: Linux rev <span class="number">1.0</span> ext3 filesystem data
[root<span class="property">@lancy</span> sbin]<span class="comment"># mount /tmp/e2image_raw_data /misc -oloop</span>
[root<span class="property">@lancy</span> sbin]<span class="comment"># df -h</span>
Filesystem 容量 已用 可用 已用 % 挂载点
/tmp/e2image_raw_data <span class="number">19</span>M <span class="number">1.2</span>M <span class="number">17</span>M <span class="number">7</span>% /misc
[root<span class="property">@lancy</span> /]<span class="comment"># mount /dev/sda1 /misc</span>
d[root<span class="property">@lancy</span> /]<span class="comment"># df -h</span>
Filesystem 容量 已用 可用 已用 % 挂载点
/dev/sda1 <span class="number">19</span>M <span class="number">1.2</span>M <span class="number">17</span>M <span class="number">7</span>% /misc
</code></pre><p>e2label：显示或者修改 ext2/ext3 文件系统的标签。没有注意过从哪个版本开始，/etc/fstab 文件里的挂载设备名不再是实际的设备名称了，取而代之的是其标签，这增加了其灵活性，特别是当删除并不是最后一个去分区时，在此分区前的设备号都会提前一位，如果 /etc/fstab 写入的是实际的设备名称，那显然这种情况下，系统也许找不到需要的设备。而采用标签的话，只要标签不重复，即使设备有 sda 变成了 sdb，Linux 系统依然能正常启动。<br>这个命令非常简单。看下面的实例就明白了</p>
<pre><code>[root<span class="variable">@lancy</span> sbin]<span class="comment"># e2label /dev/sda1</span>
[root<span class="variable">@lancy</span> sbin]<span class="comment"># e2label /dev/sda1 newlabel</span>
[root<span class="variable">@lancy</span> sbin]<span class="comment"># e2label /dev/sda1</span>
newlabel
[root<span class="variable">@lancy</span> sbin]<span class="comment">#</span>
</code></pre><p>tips:  系统在安装时建立的分区都有标签，一般根文件系统标签是 /, 而其他的就以挂载到某个目录为名称，比如 /home,<br>/usr，有人误解以为前面的斜线 (/) 是必须的，其实并不是这样，这仅仅是一种习惯而已。我上面的命令设置标签就没有用到 /</p>
<pre><code>el<span class="built_in">a_add</span> el<span class="built_in">a_remove</span> el<span class="built_in">a_show</span> el<span class="built_in">a_sig</span>_send
el<span class="built_in">a_get</span>_atts el<span class="built_in">a_remove</span>_all el<span class="built_in">a_show</span>_all
evlactiond evlfacility evlnotify evlogd evlogrmtd evltc
evlconfig evlgentmpls evlnotifyd evlogmgr evlsend evlview evSubagent
</code></pre><p>这是企业级日志系统的命令，属于 evlog RPM 包。具体的情况可以参考其<a href="http://evlog.sourceforge.net/%3C/%3E" target="_blank">官方网站</a></p>
<p>elvtune：I/O 电梯调试器，允许你调试每一个块设备的 I／O 电梯，但是还没有实现一路和二路电梯算法。<br>同时对于 LVM 而言，调试器仅仅在物理卷 (PV) 上有效果，对逻辑卷（LV）没有用。<br>不过这个命令要求的设备参数是 /dev/blkdevX (X 表示数字），我尝试传递 /dev/sda1<br>,/dev/hda1，均报告无效的参数。所以没有觉得这个命令到底能给我们带来什么，特别是在 man 手册的历史一项中这样写道：</p>
<blockquote>
<p>Ioctls for tuning elevator behaviour were added in Linux 2.3.99-pre1.</p>
</blockquote>
<p> 感觉应该是一个临时工具，但是他属于 util-linux 工具包，不解。</p>
<p>ether-wake：这个命令用来产生和发送一个 Wake-On-LAN(WOL) 数据包 (Magic<br>Packer) 包，用来重启软关机的机器。<br>这个玩意没有办法测试，也不知道实际环境中是否用得多。</p>
<p>ethtool 显示或修改以太网卡的设置，这里的设置真的是硬件方面的，比如强制为半双工等。<br>最开始我用这个命令是有一个用户说他的网卡明明是全双工的，为什么系统里看到的是半双工呀，有什么办法改吗？ifconfig 命令看了半天后<br>没有找到好的设置方式，后来找到了这个 ethtool，解决了问题。其实 mii-tool 也能做到这点，但是有些网卡驱动目前还与支持 mii-tool 工具。<br>ethtool 的命令比较复杂，参数也多，我们看几个例子，然后列出 man 手册。</p>
<p>1）打印当前网卡的配置信息</p>
<pre><code><span class="comment"># ethtool eth0</span>
Settings <span class="keyword">for</span> eth0:
Supported ports: [ TP MII ]
Supported link modes: <span class="number">10</span>baseT/Half <span class="number">10</span>baseT/Full
<span class="number">100</span>baseT/Half <span class="number">100</span>baseT/Full
Supports auto-negotiation: Yes
Advertised link modes: <span class="number">10</span>baseT/Half <span class="number">10</span>baseT/Full
<span class="number">100</span>baseT/Half <span class="number">100</span>baseT/Full
Advertised auto-negotiation: No 注：自动协商关闭
Speed: <span class="number">100</span>Mb/s<span class="comment"> // 100Mb</span>
Duplex: Full<span class="comment"> // 全双工</span>
Port: MII / 支持 mii 模式
PHYAD: <span class="number">32</span>
Transceiver: internal
Auto-negotiation: off
Supports Wake-<span class="command"><span class="keyword">on</span>: <span class="title">pumbg</span></span>
Wake-<span class="command"><span class="keyword">on</span>: <span class="title">d</span></span>
Current message level: <span class="number">0</span>×<span class="number">00000007</span> (<span class="number">7</span>)
Link detected: yes 
</code></pre><p>2）将网卡修改成 10Mbps，半双工</p>
<pre><code><span class="preprocessor"># ethtool -s eth1 speed 10 duplex half</span>
<span class="preprocessor"># ethtool eth1</span>
Settings <span class="keyword">for</span> eth1:
Supported ports: [ TP MII ]
Supported link modes: <span class="number">10</span>baseT/Half <span class="number">10</span>baseT/Full
<span class="number">100</span>baseT/Half <span class="number">100</span>baseT/Full
Supports <span class="keyword">auto</span>-negotiation: Yes
Advertised link modes: <span class="number">10</span>baseT/Half <span class="number">10</span>baseT/Full
<span class="number">100</span>baseT/Half <span class="number">100</span>baseT/Full
Advertised <span class="keyword">auto</span>-negotiation: No
Speed: <span class="number">10</span>Mb/s <span class="preprocessor"># 10Mbps</span>
Duplex: Half <span class="preprocessor"># 已经修改为半双工了</span>
Port: MII
PHYAD: <span class="number">32</span>
Transceiver: internal
<span class="keyword">Auto</span>-negotiation: <span class="keyword">off</span>
Supports Wake-<span class="keyword">on</span>: pumbg
Wake-<span class="keyword">on</span>: d
Current message level: <span class="number">0</span>×<span class="number">00000007</span> (<span class="number">7</span>)
Link detected: no
</code></pre><p>3）将网卡修改为 100M，全双工</p>
<pre><code><span class="preprocessor"># ethtool -s eth1 speed 100 duplex full</span>
<span class="preprocessor"># ethtool eth1</span>
Settings <span class="keyword">for</span> eth1:
Supported ports: [ TP MII ]
Supported link modes: <span class="number">10</span>baseT/Half <span class="number">10</span>baseT/Full
<span class="number">100</span>baseT/Half <span class="number">100</span>baseT/Full
Supports <span class="keyword">auto</span>-negotiation: Yes
Advertised link modes: <span class="number">10</span>baseT/Half <span class="number">10</span>baseT/Full
<span class="number">100</span>baseT/Half <span class="number">100</span>baseT/Full
Advertised <span class="keyword">auto</span>-negotiation: No
Speed: <span class="number">100</span>Mb/s <span class="preprocessor">#</span>
Duplex: Full <span class="preprocessor">#</span>
Port: MII
PHYAD: <span class="number">32</span>
Transceiver: internal
<span class="keyword">Auto</span>-negotiation: <span class="keyword">off</span>
Supports Wake-<span class="keyword">on</span>: pumbg
Wake-<span class="keyword">on</span>: d
Current message level: <span class="number">0</span>×<span class="number">00000007</span> (<span class="number">7</span>)
Link detected: no
</code></pre><p>我们再看看 man 手册</p>
<pre>
 ethtool ethX # 显示网卡的

 ethtool -h # 打印帮助

 ethtool -a ethX # 查询指定网卡的暂停 (pause) 参数信息

 ethtool -A ethX [autoneg on|off] [rx on|off] [tx on|off] # 设置暂停参数

 ethtool -c ethX # 查询指定网卡的联合 (coalesc) 信息

 ethtool -C ethX [adaptive-rx on|off] [adaptive-tx on|off] [rx-usecs N]
 [rx-frames N] [rx-usecs-irq N] [rx-frames-irq N] [tx-usecs N] [tx-
 frames N] [tx-usecs-irq N] [tx-frames-irq N] [stats-block-usecs N]
 [pkt-rate-low N] [rx-usecs-low N] [rx-frames-low N] [tx-usecs-low N]
 [tx-frames-low N] [pkt-rate-high N] [rx-usecs-high N] [rx-frames-high
 N] [tx-usecs-high N] [tx-frames-high N] [sample-interval N]
 # 设置指定网卡的联合信息

 ethtool -g ethX # 查询网卡的 RX/TX 参数信息

 ethtool -G ethX [rx N] [rx-mini N] [rx-jumbo N] [tx N] # 设置网卡的 RX/TX 参数

 ethtool -i ethX # 查询与网卡关联的驱动信息

 ethtool -d ethX # 重新获取和打印一个网卡的注册 dump 信息

 ethtool -e ethX [raw on|off] [offset N] [length N] # 重新获取和打印网卡的 EEPROM
dump 信息

 ethtool -E ethX [magic N] [offset N] [value N] # 修改网卡的 EEPROM 字节

 ethtool -k ethX # 查询网卡的卸载 (offload) 信息

 ethtool -K ethX [rx on|off] [tx on|off] [sg on|off] [tso on|off]
# 修改网卡的卸载参数

 ethtool -r ethX # 重启网卡的自动协商 (auto-negotiation) 功能，如果这个功能设置位可用的话

 ethtool -t ethX [offline|online] # 执行网卡自检程序

 ethtool -s ethX [speed 10|100|1000] [duplex half|full]
 [port tp|aui|bnc|mii] [autoneg on|off] [phyad N] [xcvr internal|exter-
 nal] [wol p|u|m|b|a|g|s|d...] [sopass xx:yy:zz:aa:bb:cc] [msglvl N]
# 可以修改的参数值，用 -s 来标志
</pre>

<p>这些设置仅仅在当前生效，一旦重启网络或者重启系统，ethtool 的设置将会失效。我们可以把 ethtool 的设置命令加入到 ifcfg-ethX 配置文件中。<br>比如，你希望把第一块网卡设置为全双工，自适应和 100M 的方式，那么你可以在你的<code>/etc/sysconfig/network-scripts/ifcfg-eth0</code>文件中加入下面一行：<br> <code>ETHTOOL_OPTS=&quot;speed 100 duplex full autoneg off&quot;</code></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-01-29T16:00:00.000Z"><a href="/2007/01/30/commands-start-d/">1月 30 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/01/30/commands-start-d/">\[sbin学习\]d\*学习--完成</a></h1>
  

    </header>
    <div class="entry">
      
        <p>接着上次没有完成的<a href="2007/01/29/commands-start-d-incomplete/">d 命令学习</a></p>
<p>-S 大小评估。用来计算 dump 需要的空间，但是并不真正执行 dump 操作。这对增量备份有好处，因为可以知道需要多少存储介质。</p>
<p>-T 时间。使用指定的时间来作为 dump 的时间，而不是从 /etc/dumpdates 里读取。这里时间的格式和 ctime(3) 的格式相同，遵守<br> RFC822 时区规范。他先下面的 -u 参数是互斥的。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2007/01/30/commands-start-d/#more" class="more-link">Read More &rarr;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-01-28T16:00:00.000Z"><a href="/2007/01/29/commands-start-d-incomplete/">1月 29 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/01/29/commands-start-d-incomplete/">\[sbin学习\]d\*命令--未完成</a></h1>
  

    </header>
    <div class="entry">
      
        <p>看了今天是无法完成 d* 命令的学习了，有几个重量级的命令都是 d 开头的，这就要一些时间，先把完成的一部分贴出来吧。<br>/sbin/ 下 d 开头的命令如下</p>
<pre><code>debugfs delpart dhclient-script dmsetup dump dump<span class="preprocessor">.static</span>
debugfs<span class="preprocessor">.ocfs</span>2 depmod dhcp6c dmsetup<span class="preprocessor">.static</span> dump_cis
debugreiserfs dhclient dmraid dosfsck dumpe2fs
</code></pre><p>其中 dump.static 软连接到 dump 命令，而 dump 程序是一个静态编译的命令。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2007/01/29/commands-start-d-incomplete/#more" class="more-link">Read More &rarr;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-01-27T16:00:00.000Z"><a href="/2007/01/28/Html-command-line-to-send-e-mail-with-attachments-and-e-mail/">1月 28 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/01/28/Html-command-line-to-send-e-mail-with-attachments-and-e-mail/">命令行发送html邮件和带附件的邮件</a></h1>
  

    </header>
    <div class="entry">
      
        <p>在命令行发送带附件的邮件倒是很早就知道了，我的方法是采取最懒的，用<a href="http://www.mutt.org/" target="_blank">mutt</a>来把帮忙。命令很简单<br><code>echo &quot;your email body&quot; | mutt -s &quot;here you subject&quot; -a /path/to/mutt.tar.gz  your@email.com</code><br>当然如果你的邮件正文很长，那就可以采用重定向的方式了。</p>
<p><code>mutt -s &quot;here you subject&quot; -a /path/to/mutt.tar.gz your@email.com</code><br>但是这种方式发送 html 格式正文的邮件却不成功，因为邮件头默认是 text/plain 格式的，不是 text/html 格式。<br>网上有人说可以配置<code>~/.muttrc</code>来解决这个问题，但是我看了 muttrc 的 man 手册，也尝试了一下，但是没有结果。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2007/01/28/Html-command-line-to-send-e-mail-with-attachments-and-e-mail/#more" class="more-link">Read More &rarr;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-01-26T16:00:00.000Z"><a href="/2007/01/27/commands-start-c/">1月 27 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/01/27/commands-start-c/">\[sbin学习\]c\*命令</a></h1>
  

    </header>
    <div class="entry">
      
        <p>/sbin 目录下 c 开头的命令也没有多少，列出如下</p>
<pre><code>cardctl cardmgr change_console chkconfig clock consoletype cryptsetup ctrlaltdel
</code></pre><p>其中 clock 还是软连接。</p>
<pre><code>[root<span class="property">@lancy</span> sbin]<span class="comment"># ls -l clock </span>
lrwxrwxrwx <span class="number">1</span> root root <span class="number">7</span> <span class="number">9</span>月 <span class="number">7</span> <span class="number">12</span>:<span class="number">07</span> clock<span class="function"> -&gt;</span> hwclock
</code></pre><p>因此这个留待 h* 命令的时候来学习。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2007/01/27/commands-start-c/#more" class="more-link">Read More &rarr;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-01-24T16:00:00.000Z"><a href="/2007/01/25/commands-start-b/">1月 25 2007</a></time>
      
      
  
    <h1 class="title"><a href="/2007/01/25/commands-start-b/">\[sbin学习\]b\*命令</a></h1>
  

    </header>
    <div class="entry">
      
        <p>/sbin/b* 命令不多，DC5.0 下面仅仅 3 个</p>
<p>badblocks,blkid 和 blockdev</p>
<p>badblocks:<br>对指定的设备找出坏块, 他接受的参数不是太多，你可以指定开始块也结束块。还能用 -f 来指定是否需要对查找的分区进行修复，不过在 man 中对－f 这个参数的描述是，<br>永远都不要使用－f，除非你比这个命令更聪明。</p>
<pre><code> [root<span class="variable">@lancy</span> sbin]<span class="comment"># badblocks /dev/hda5 </span>
</code></pre><p>man 手册中提到一般不要直接执行 badblocks 命令，而是应该用 e2fsck 命令的－c 参数来自动调用 badblocks 命令，他会查找坏块并标记起来，以便下次存储数据时，不会存储在这些坏块上。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2007/01/25/commands-start-b/#more" class="more-link">Read More &rarr;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
    <a href="/archives/page/21/" class="alignleft prev">上一页</a>
  
  
    <a href="/archives/page/23/" class="alignright next">下一页</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:wgzhao.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Linux技术/">Linux技术</a><small>152</small></li>
  
    <li><a href="/categories/WEB开发/">WEB开发</a><small>5</small></li>
  
    <li><a href="/categories/Linux技术/WEB开发/">WEB开发</a><small>1</small></li>
  
    <li><a href="/categories/lsb/init/">init</a><small>1</small></li>
  
    <li><a href="/categories/lsb/init/linux/">linux</a><small>1</small></li>
  
    <li><a href="/categories/lsb/">lsb</a><small>1</small></li>
  
    <li><a href="/categories/vsftp/mysql/">mysql</a><small>1</small></li>
  
    <li><a href="/categories/vsftp/mysql/pam_mysql/">pam_mysql</a><small>1</small></li>
  
    <li><a href="/categories/plan/">plan</a><small>1</small></li>
  
    <li><a href="/categories/strace/">strace</a><small>1</small></li>
  
    <li><a href="/categories/plan/summary/">summary</a><small>1</small></li>
  
    <li><a href="/categories/strace/sys call/">sys call</a><small>1</small></li>
  
    <li><a href="/categories/strace/sys call/troubleshooting/">troubleshooting</a><small>1</small></li>
  
    <li><a href="/categories/vsftp/">vsftp</a><small>1</small></li>
  
    <li><a href="/categories/我读我书/">我读我书</a><small>11</small></li>
  
    <li><a href="/categories/Linux技术/我读我书/">我读我书</a><small>5</small></li>
  
    <li><a href="/categories/技术技巧/">技术技巧</a><small>25</small></li>
  
    <li><a href="/categories/Linux技术/技术技巧/">技术技巧</a><small>4</small></li>
  
    <li><a href="/categories/数据库/">数据库</a><small>8</small></li>
  
    <li><a href="/categories/随心所想/">随心所想</a><small>111</small></li>
  
    <li><a href="/categories/我读我书/随心所想/">随心所想</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li>
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li>
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
      <li>
        <a href="/2012/08/21/explaining-the-postgresql-query-optimizer/">PostgreSQL查询优化简介</a>
      </li>
    
      <li>
        <a href="/2012/08/20/several-popular-nosql-databases-key-features-list/">几种常见的NoSQL数据库关键特性列表</a>
      </li>
    
  </ul>
</div>


  
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12">十二月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08">八月 2012</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04">四月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01">一月 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09">九月 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08">八月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04">四月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03">三月 2011</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08">八月 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07">七月 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06">六月 2010</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05">五月 2010</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04">四月 2010</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03">三月 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/02">二月 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01">一月 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/12">十二月 2009</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/11">十一月 2009</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/10">十月 2009</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/09">九月 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/08">八月 2009</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/07">七月 2009</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/04">四月 2009</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/03">三月 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/02">二月 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/01">一月 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/12">十二月 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/09">九月 2008</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/08">八月 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/07">七月 2008</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/06">六月 2008</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/05">五月 2008</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/04">四月 2008</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/03">三月 2008</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/02">二月 2008</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/01">一月 2008</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/12">十二月 2007</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/11">十一月 2007</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/10">十月 2007</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/09">九月 2007</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/08">八月 2007</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/07">七月 2007</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/06">六月 2007</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/05">五月 2007</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/04">四月 2007</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/03">三月 2007</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/02">二月 2007</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/01">一月 2007</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/12">十二月 2006</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/11">十一月 2006</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/10">十月 2006</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/09">九月 2006</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/08">八月 2006</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/07">七月 2006</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/06">六月 2006</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/05">五月 2006</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/04">四月 2006</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/03">三月 2006</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/01">一月 2006</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/12">十二月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/11">十一月 2005</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/09">九月 2005</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/05">五月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/04">四月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/03">三月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/01">一月 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/12">十二月 2004</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/10">十月 2004</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 wgzhao
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'wgzhao';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>