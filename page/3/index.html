
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux系统管理</title>
  <meta name="author" content="wgzhao">

  
  <meta name="description" content="把上面的代码保存为dummy.c。而后使用autoscan命令来粗昂间一个configure模板文件，命令如下 $ autoscan $ ls
autoscan.log configure.scan dummy.c 将生成的configure.scan文件保存为configure.in，并进行修改 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wgzhao.github.io/page/3">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Linux系统管理" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux系统管理</a></h1>
  
    <h2>关注Linux系统管理，运维开发以及大数据</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wgzhao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/03/18/how-to-build-a-fake-deb-package-quickly/">快速制作一个虚假deb格式软件包</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-18T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2011/03/18/how-to-build-a-fake-deb-package-quickly/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2011/03/18/how-to-build-a-fake-deb-package-quickly/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>把上面的代码保存为<code>dummy.c</code>。而后使用<code>autoscan</code>命令来粗昂间一个<code>configure</code>模板文件，命令如下</p>

<pre><code>$ autoscan 
$ ls
autoscan.log  configure.scan  dummy.c
</code></pre>

<p>将生成的<code>configure.scan</code>文件保存为<code>configure.in</code>，并进行修改，只用保留下面几行内容就行了，我在文件里注释说明</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2011/03/18/how-to-build-a-fake-deb-package-quickly/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/03/11/ssh-three-kill-features/">Ssh的三板斧</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-11T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2011/03/11/ssh-three-kill-features/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2011/03/11/ssh-three-kill-features/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ssh的功能无比强悍，对于一个<strong>Unix/Linux</strong>而言，只要开放一个ssh服务，就可以轻松，随意，快捷，方便的全盘操控这台机器。相信很多功能大家都很熟悉了，我这里只是想把它的其中三个具有杀手级的功能例举一下：</p>

<h2>端口转发</h2>

<p>端口转发，也就是-L参数的设置。以我的实际例子来说明吧，我在家里上网，设置的是局域网，IP地址是<code>192.168.100.101</code>。公司总部呢，也是用的是局域网地址，<code>172.16.0.0</code>网段。我需要访问公司内部的一台应用服务器，比如<code>172.16.81.111</code>。我该怎么办呢？恰好，公司有一台网关服务器，有两块网卡，一块是设置的公网IP地址，比如<code>219.99.12.23</code>。另外一块网卡，则是公司的内网的IP地址，比如<code>172.16.81.220</code>。这台服务器开启了SSH服务。那么我要做的便是执行下面的指令:</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2011/03/11/ssh-three-kill-features/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/03/09/online-resizing-ext4-filesystem/">在线扩容ext4文件系统</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-09T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2011/03/09/online-resizing-ext4-filesystem/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2011/03/09/online-resizing-ext4-filesystem/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>原来一个分区分得太小了（只有5G），等拷贝完数据才知道太小了。于是尝试了扩容的办法。以前对ext3干过这样的事情，看了ext3上的<a href="https://ext4.wiki.kernel.org/index.php/Frequently_Asked_Questions#How_to_online_resize_the_Ext4_filesystem.3F">wiki介绍</a>，得知做法和原来的ext2/ext3一样（看来兼容性还是不错）。下面是我的扩容过程</p>

<p>首先下载你要扩容的分区，这样当然是最保险的，如果你就是不想卸载，只要你别对其做写操作，也没有问题。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2011/03/09/online-resizing-ext4-filesystem/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/24/public-dns-servers/">Public DNS Servers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-24T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2010/08/24/public-dns-servers/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2010/08/24/public-dns-servers/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Norton DNS (198.153.192.1, 198.153.194.1)<br/>
OpenDNS (208.67.222.222,208.67.220.220)<br/>
OpenDNS Family (208.67.222.123, 208.67.220.123) <br/>
Comodo Secure DNS (156.154.70.22, 156.156.71.22)<br/>
ScrubIt DNS (67.138.54.100,207.225.209.66)<br/>
DNS Advantage (156.154.70.1, 156.154.71.1)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/23/record-linux-desktop-using-ffmpeg/">抓取LINUX桌面的视频</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-23T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2010/08/23/record-linux-desktop-using-ffmpeg/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2010/08/23/record-linux-desktop-using-ffmpeg/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><code>$ ffmpeg -f x11grab -s wxga -r 25 -i :0.0 -sameq /tmp/out.mpg</code></p>

<p>我们在一些视频网站上看到别人的3D桌面怎么怎么酷的视频，通常就是这么来的，ffmpeg可以直接解码X11的图形，并转换到相应输出格式。<br/>
ffmpeg的通常用法是，根据一堆参数，输出一个文件，输出文件通常放最后，下面解析下几个参数：</p>

<p><code>-f x11grab</code> 指定输入类型。  因为x11的缓冲区不是普通的视频文件可以侦测格式，必须指定后<code>ffmpeg</code>才知道如何获得输入。</p>

<p><code>-s wxga</code> 设置抓取区域的大小。wxga是<code>1366*768</code>的标准说法，也可以换成<code>-s 800×600</code>的写法。</p>

<p><code>-r 25</code> 设置帧率，即每秒抓取的画面数。</p>

<p><code>-i :0.0</code> 设置输入源，本地X默认在0.0 -sameq 保持跟输入流一样的图像质量，以用来后期处理。</p>

<p>至于其他ffmpeg的用法，可以参考下面两篇文章：</p>

<p><a href="http://www.catonmat.net/blog/how-to-extract-audio-tracks-from-youtube-videos/">How to Extract Audio Tracks from YouTube Videos</a></p>

<p><a href="http://www.catonmat.net/blog/converting-youtube-flvs-to-a-better-format-with-ffmpeg">Converting YouTube Flash Videos to a Better Format with ffmpeg</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/19/matrix-keyboard/">山寨版Matrix</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2010/08/19/matrix-keyboard/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2010/08/19/matrix-keyboard/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.flickr.com/photos/mlsx/4906513189/" title="photo sharing"><img src="http://farm5.static.flickr.com/4095/4906513189_a7d50ef3b7.jpg" alt="image" /></a>
<a href="http://www.flickr.com/photos/mlsx/4906513189/">山寨版Matrix</a>，原由
<a href="http://www.flickr.com/people/mlsx/">mlsx</a> 上載。</p>

<p>用皮皮的架子鼓架空笔记本，增加散热能力。</p>

<p>用从用户处讹来的原状IBM键盘做主键盘。 笔记本键盘主要用做快捷键。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/06/fix-the-encode-of-files-extracted-from-windows-zip-ball/">Windows下压缩包在linux解压乱码的解决办法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-06T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2010/08/06/fix-the-encode-of-files-extracted-from-windows-zip-ball/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2010/08/06/fix-the-encode-of-files-extracted-from-windows-zip-ball/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我的系统是ubuntu 10.04 ，编码是<code>zh_CN.UTF-8</code>。
我从网络上下载的绝大部分zip包，解压后，连带目录和文件都是乱码。在终端尝试更换LANG，LANGUAGE等环境变量，还是不能直接解决问题。</p>

<p>而且用unzip解压后，无论你怎么设置convmv命令的编码参数，均不能解决问题。后通过7z工具算是暂时解决了这个问题。
首先用apt安装7z工具包。 <br/>
然后用下面的两条指令： <br/>
1) <code>LANG=C 7z x xxx.zip</code> <br/>
2) <code>convmv -f cp936 -t utf8 -r --notest *</code></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/07/14/chroot-in-ssh-server/">在ssh服务里使用chroot</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-14T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2010/07/14/chroot-in-ssh-server/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2010/07/14/chroot-in-ssh-server/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>对于虚拟主机而言，平衡用户易用体验和安全是一个挑战，比如如果开发ssh给用户，那么无疑能极大的增加用户操作的灵活性，但是ssh的强大也是得在安全方面让管理员很头疼，如何将用户限制在自己的环境中，就显得尤为重要。</p>

<p>幸而openSSH已经了解到了这点，目前的版本均支持chroot功能，下面我简单的描述一下在ubuntu
10.04系统上如何实现，其他系统实现的原理相同，只是一些配置文件和指令不同而已。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2010/07/14/chroot-in-ssh-server/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/07/02/multiple-ssh-connects-with-the-same-session/">共享会话的ssh连接配置</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-02T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2010/07/02/multiple-ssh-connects-with-the-same-session/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2010/07/02/multiple-ssh-connects-with-the-same-session/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>针对一个服务器需要同时开几个ssh连接，也许是同一个帐号链接，也许是不同的帐号，你是不死和厌烦了每次的都要输入密码？其实ssh链接可以做到共享会话的。
一个办法是用一些ssh链接客户端，比如Windows下的<a href="http://www.vandyke.com/products/securecrt/">Secure
CRT</a>，Linux下的<a href="http://projects.gnome.org/hotssh/">hotssh</a>。
另外一个办法，就是自己修改ssh客户端配置文件，创建<code>~/.ssh/ssh_config</code>文件，加入下面的内容：</p>

<pre><code>Host *
ControlMaster auto ControlPath ~/.ssh/master-%r@%h:%p
</code></pre>

<p>当对服务器发起一个链接的时候，在<code>~/.ssh</code>目录下就会创建一个文件,当你退出所有多该服务器的链接是，该文件会自动删除。 现在就尝试吧</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/06/24/mapping-raw-devices-to-lvm-devices-on-redhat-as5-update-2-or-later/">Redhat El5如何映射裸设备到逻辑卷</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-24T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2010/06/24/mapping-raw-devices-to-lvm-devices-on-redhat-as5-update-2-or-later/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2010/06/24/mapping-raw-devices-to-lvm-devices-on-redhat-as5-update-2-or-later/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>之前的版本如何做，这里不做描述，自行<a href="https://www.google.com.hk">
Google</a>。
之前通常的方法，在该版本，KERNEL并不能直接获得设备名称或者主次设备号，我们需要通过<code>dmsetup</code>指令来间接获得。
一下操作的目录均在<code>/etc/udev/rules.d/</code>。</p>

<ol>
<li><p>编辑90-dm.rules文件，注释掉下面这行<br/>
﻿<code>KERNEL=="dm-[0-9]*", ACTION=="add", OPTIONS+="ignore_device"</code></p></li>
<li><p>编辑<code>60-raw.rules</code>文件，加入下面几行：</p>

<pre><code> KERNEL!="dm-[0-9]*",GOTO="skip_dm"
 PROGRAM!="/sbin/dmsetup  ls --exec /bin/basename -j %M -m %m", GOTO="skip_dm"
 RESULT=="vg1-lv1", RUN+="/bin/sh -c '/bin/raw /dev/raw/raw1 $MAJOR $MINOR'"
 LABEL=skip_dm
</code></pre>

<p>上面第一行代码表示如果不是dm设备，则直接跳到skip_dm处
第二行表示如果后面的指令返回为假（非0值），则跳到skip_dm处。</p></li>
</ol>


</div>
  
  
    <footer>
      <a rel="full-article" href="/2010/06/24/mapping-raw-devices-to-lvm-devices-on-redhat-as5-update-2-or-later/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/01/14/block-youku-ads-cleanly/">彻底屏蔽优酷广告</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/21/explaining-the-postgresql-query-optimizer/">PostgreSQL查询优化简介</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/wgzhao">@wgzhao</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'wgzhao',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/wgzhao?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/wgzhao">My Delicious Bookmarks &raquo;</a></p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - wgzhao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wgzhao';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
