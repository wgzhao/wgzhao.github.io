
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux系统管理</title>
  <meta name="author" content="wgzhao">

  
  <meta name="description" content="2008年年初的时候，我做了一个年度计划，现在是总结和做2009年计划的时候了。 2008年的计划现在来看基本都已经完成了，凤凰在4月份的时候去了玩了，至于米米嘛，应该说相比2007年有大幅度的增加，只是因为10月份的金融危机，导致目前还是单一经济收入，增加结构性收入这点没有实现。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wgzhao.github.io/page/18">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Linux系统管理" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux系统管理</a></h1>
  
    <h2>关注Linux系统管理，运维开发以及大数据</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wgzhao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/01/07/2009-plan/">2009年计划</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-01-07T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2009/01/07/2009-plan/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2009/01/07/2009-plan/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>2008年年初的时候，我做了一个<a href="http://blog.wgzhao.com/2008/01/01/planned-2008.html">年度计划</a>，现在是总结和做2009年计划的时候了。</p>

<p>2008年的计划现在来看基本都已经完成了，凤凰在4月份的时候去了玩了，至于米米嘛，应该说相比2007年有大幅度的增加，只是因为10月份的金融危机，导致目前还是单一经济收入，增加结构性收入这点没有实现。</p>

<p>2008年最重要的造人计划，显然获得了圆满成功，而且是心想事成（我一直想要一个女儿），看看现在的皮皮越来越可爱，就会觉得日子过得越来越有滋味。</p>

<p>至于2009年，目前的计划是：</p>

<ol>
<li>好好抚养皮皮，这当然是我和lancy的责任，无须多说，只盼皮皮快快长大！</li>
<li>米米当然还是很重要的，毕竟添了新人，所以还是要增加结构性收入的，同时也要有创造性收入</li>
<li>如果金融危机不再加深，考虑在这年买房，暂时的想法是想带装修的，因为装修总是一个头疼的事情，如果是自己设计装修，不知道<a href="http://brisy.xplore.cn">Brisy</a>是否还记得以前的承诺呢？不过我想他肯定没有时间。<a href="http://mwf.my73.com">青韶</a>说如果我买了房子，他就送我一套价值9999的净水设备，其实我逼他送的，哈哈。这显然就是2009年最重要的事情了。</li>
<li><p>想增加收入，当然得增加本事，所以专业技能方面还是得继续增强，2009年打算在下面三个方面深入下去：</p>

<ul>
<li>数据库技术方面，想重点学习Oracle和MySQL</li>
<li>集群和虚拟化技术，个人觉得以后这方面会用得越来越多，在工作中碰到的案例也会越来越多，因此要多多强加</li>
<li>系统管理技术，这是一个不断需要学习方向，2009年打算学习Python语言，尝试用它来帮助我增加系统管理的便利性，自动化程度等。</li>
</ul>
</li>
<li><p>增加知识面，就需要增加自己的阅读量、阅读面，因此2009年打算多看一些非专业类的书，文学类，经济类，历史类都应该看看，还是要多买一些书，电子版看上去还是没有阅读这样来得舒适和深刻。</p></li>
</ol>


<p>暂时这些把，如果2009年我能完成上面的这些任务，特别是第3条，那可以说2009年就非常具有纪念意义了，加油！</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/27/talk-about-rc-local/">说说/etc/rc.d/rc.local</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-27T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/12/27/talk-about-rc-local/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/12/27/talk-about-rc-local/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><code>/etc/rc.d/rc.local</code>似乎是很多linux系统管理员的偏爱，因为凡是需要随系统自动启动的服务、程序等，只要系统没有提供SysV风格的启动脚本，就把这些需求都塞到<code>/etc/rc.d/rc.local</code>。</p>

<p>当然，绝大部分情况下，你会发现这一切都工作得很正常，看上去也很美好。<br/>
不过，当你遇到了一些诡异的问题的时候，也许你应该好好的去看看<code>/etc/rc.d/rc.local</code>里都写了什么了？</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/12/27/talk-about-rc-local/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/21/nagios-configuration-profile/">Nagios配置简介</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-21T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/12/21/nagios-configuration-profile/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/12/21/nagios-configuration-profile/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.nagios.org/" title="Nagios">Nagios</a>是一个开源的，企业级系统监控系统，可以监控主机状态，大量知名服务状态，以及网络状态。对于不在默认模板范围之内的服务，还可以自己写插件来完成，稍微做一些修改，就可以充当HA的功能了。</p>

<p>我的这次测试是在ubuntu 8.10下完成的，步骤如下：</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/12/21/nagios-configuration-profile/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/21/bo-opened-the-5th-anniversary/">开博5周年</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-21T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/12/21/bo-opened-the-5th-anniversary/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/12/21/bo-opened-the-5th-anniversary/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>翻看我的<a href="http://blog.wgzhao.com/2003/12/21/I-am-a-teacher-of-embarrassment/">第一篇博客</a>，刚好是5年前的今天，时间过得真快，当时只是赶时髦的一个做法，没有想到一直坚持了下来。</p>

<p>其实要说到在网络上记录一些事情这种模式，我在03年之前就已经做了，只是当然不知道又博客这个东西，大概是02年底，03年初的时候刚从大学毕业，于是就模仿国外大学比较流行的做法，创建了<a href="http://cie.xtu.edu.cn/~mlsx">http://cie.xtu.edu.cn/~mlsx</a></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/12/21/bo-opened-the-5th-anniversary/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/19/mysql-can-not-start/">Mysql不能启动的一个小问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/12/19/mysql-can-not-start/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/12/19/mysql-can-not-start/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>某人的一台机器，自己编译的mysql-5.0.4，编译本身没有问题，该设置的权限也都设置了，就是启动的时候失败，给出的信息如下：</p>

<pre><code>081217 20:53:26 mysqld started 081217 20:53:26 [ERROR] /wpx/db/var/:
Can't create/write to file '/wpx/db/var/dev.pid' (Errcode: 13) 081217
20:53:26 [ERROR] Can't start server: can't create PID file: Permission
denied 081117 20:53:26 mysqld ended
</code></pre>

<p>看上去应该是权限的问题，但是<code>/wpx/db</code>这个目录已经属于<code>myql.mysql</code>了，而且也是755的权限，怎么就不能创建pid文件呢？
google一下，发现很多人存在这个问题，不过没有看到解决的结果。</p>

<p>从报错的信息的来看，应该还是权限问题，于是从/开始找起，看看哪里有问题，果然/wpx的权限出了问题，是644，也就是无法访问这个目录了，之所以没有一开始就发现这个问题，是被root帐号迷惑了，我们知道权限位的设置对root其实是没有含义的，因此即便/wpx设置为644，root帐号一样可以进入，而我一直都在<code>/wpx/db/bin/</code>下执行<code>mysqld_safe</code>这个启动程序，当然不会想到<code>/wpx</code>没有访问权限了，但是对于mysqld进程的拥有者mysql而言，/wpx当然就变成了不可逾越的鸿沟了。</p>

<p>So，修改/wpx为755，问题解决。</p>

<p>总结一下，对于一个mysqld进程的拥有者mysql来说，其访问路径不得小于下面的权限，以<code>/wpx/db/</code>为例子：</p>

<ul>
<li>/ &mdash;&ndash;>至少有一个x权限，可以进入</li>
<li>/wpx &mdash;>至少有一个x权限，可以进入</li>
<li>/wpx/db &mdash;>至少有一个x权限，可以进入</li>
<li>/wpx/db/var &mdash;>至少有一个权限，可以进入</li>
<li>/wpx/db/var/mysql &mdash;>至少有wx权限，如果你想创建或者删除文件的话（这里存储数据文件）</li>
<li>/wpx/db/var/dev.err &mdash;>至少有w权限，当需要更新错误信息时</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/18/zfs-fuse-poor-performance/">Zfs-fuse性能还是差了些</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-18T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/12/18/zfs-fuse-poor-performance/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/12/18/zfs-fuse-poor-performance/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>虚拟机创建的系统镜像文件存放在ZFS文件系统，Linux目前的ZFS实现是基于FUSE的，虽然具有了ZFS的一些亮点，但是性能上却打了很大的折扣，对于系统镜像的这种大文件而已，个人认为存在在XFS文件系统上应该性能会比较好。
下面是在我的机器上做得一个简答的测试，利用<a href="http://www.coker.com.au/bonnie++/">bonnie++</a>分别测试了ZFS文件系统，EXT3文件系统和XFS文件系统，所使用的OS是ubuntu 8.10。 下面是zfs-fuse的测试</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/12/18/zfs-fuse-poor-performance/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/17/virtualbox-using-a-usb-device-tips/">virtualbox使用USB设备的一个小技巧</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-17T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/12/17/virtualbox-using-a-usb-device-tips/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/12/17/virtualbox-using-a-usb-device-tips/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ubuntu 8.10上安装最新的<a href="http://www.virtualbox.org/">VirtualBox</a>,普通用户运行VirtualBox，添加一个USB设备时，会给出</p>

<blockquote><p>Could not load the Host USB Proxy Service (VERR_FILE_NOT_FOUND) .
The service might be not installed on the host computer</p></blockquote>

<p>的错误，原因应该是普通用户没权访问<code>/proc/bus/usb</code>，解决的办法当然很简单，就是给当前用户增加可以访问的权限，过程类似下面的脚本</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/12/17/virtualbox-using-a-usb-device-tips/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/17/mondo-can-not-restore-my-system/">Mondo恢复不了我的系统</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-17T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/12/17/mondo-can-not-restore-my-system/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/12/17/mondo-can-not-restore-my-system/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.mondorescue.org">mondo</a>算是一款比较成熟的Linux平台备份/恢复软件了，功能强大，而且有实际生产上的成功案例。
于是我用它备份了我的系统，备份成ISO镜像，每个ISO 660M的样子，一共备份出来了5个ISO。</p>

<p>前两天我打算从这些ISO中恢复我的系统，不过这些ISO我都可以刻录，而是放在一个专门的分区里(ext3文件系统）。</p>

<p>启动mondorestore，选择从HardDisk里读取ISO，然后指定了路径，而且mondorestore也读出了这5个ISO里的文件列表。于是我开始全部选择恢复，指定恢复的路径(我把需要恢复的分区挂载到了一个目录上），最开始，一切看上去都那么美好。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/12/17/mondo-can-not-restore-my-system/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/10/setup-vpn-with-hamachi/">利用hamachi快速构建自己的VPN</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-10T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/12/10/setup-vpn-with-hamachi/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/12/10/setup-vpn-with-hamachi/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://secure.logmein.com/products/hamachi/vpn.asp?lang=zh">hamachi</a>是一个简洁，零配置的VPN构件工具，只要两台可以连接互联网的机器，不管你的内部网络是怎么样的架构，不管是否在防火墙后面，均可以在1分钟内讲两台不在一个局域网的机器通过隧道连接起来。</p>

<p>详细的情况可以看他的<a href="https://dl.getdropbox.com/u/220586/Hamachi-README">Readme</a>，至于Windows用户，可以参考他的<a href="https://secure.logmein.com/products/hamachi/Hamachi_Getting_Started_Guide.pdf">快速指南(PDF版本)</a>，非常的简单。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/12/10/setup-vpn-with-hamachi/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/12/05/fedora-started/">开始使用Fedora</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-05T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/12/05/fedora-started/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/12/05/fedora-started/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>离最近一次是使用Fedora Core系列发行版还是3年半前，当时使用的Fedora Core 3，因为工作的原因，放弃了Fedora Core 3的继续使用，其后一直在使用<a href="http://www.redflag-linux.com">RedFlag</a> 系列版本，包括服务器版本，桌面版本和社区版本，不过最近一段时间又放弃了，原因主要是两个：一个是升级的原因，目前RedFlag版本平滑升级的成本很高，而且因为精简的原因，导致安装软件存在复杂的依赖关系，二是想看看其他发型版本的特点。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/12/05/fedora-started/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/19/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/17/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/01/14/block-youku-ads-cleanly/">彻底屏蔽优酷广告</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/21/explaining-the-postgresql-query-optimizer/">PostgreSQL查询优化简介</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/wgzhao">@wgzhao</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'wgzhao',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/wgzhao?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/wgzhao">My Delicious Bookmarks &raquo;</a></p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - wgzhao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wgzhao';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
