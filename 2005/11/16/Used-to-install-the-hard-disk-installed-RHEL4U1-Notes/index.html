
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>用硬盘安装的方式安装RHEL4U1手记 - Linux系统管理</title>
  <meta name="author" content="wgzhao">

  
  <meta name="description" content="将vmlinuz和initrd.img拷贝到硬盘上，用grub引导的方式安装 进来的第一个界面与Asianux一样，选择语言，支持的语言很多，选中文后屏幕也会变红 进入X后界面也是分成左右两屏，左边是一些介绍，可以隐藏帮助和查看发行注记。 安装步骤基本上一致，RH有防火墙配置， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wgzhao.github.io/2005/11/16/Used-to-install-the-hard-disk-installed-RHEL4U1-Notes">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Linux系统管理" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux系统管理</a></h1>
  
    <h2>关注Linux系统管理，运维开发以及大数据</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wgzhao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">用硬盘安装的方式安装RHEL4U1手记</h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-11-16T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>将vmlinuz和initrd.img拷贝到硬盘上，用grub引导的方式安装</p>

<p>进来的第一个界面与Asianux一样，选择语言，支持的语言很多，选中文后屏幕也会变红</p>

<p>进入X后界面也是分成左右两屏，左边是一些介绍，可以隐藏帮助和查看发行注记。</p>

<p>安装步骤基本上一致，RH有防火墙配置，这步里还包括SELinux配置，默认都是打开的，如果打开防火墙ssh都不能用了。<br/>
Asianux里默认都是关闭的。</p>

<!--more-->


<p>
语言选择必须要选择支持语言，这样才能在系统中切换语言。Asianux默认中、日、韩都装进去了。</p>

<p>中国的时区只能选“亚洲/上海”，没有北京。</p>

<p>默认不是安装全部包，默认是类似典型安装的方式，完全安装要6G。</p>

<p>没有配置X的界面。</p>

<p>没有修复GRUB的功能，但是支持升级安装。</p>

<p>SELinux默认是打开的，可以选择关闭。<br/>
注：老版本的系统（如AS2.1）不支持文件的扩展属性（SELinux的新特性），所以如果用老的系统mount新系统的分区可能会导致核心崩溃。</p>

<p>Mount默认使用TCP而不再是UDP来进行NFS传输。</p>

<p>RH的中文默认是UTF-8编码，用IIIMF输入法（日韩也是）。</p>

<p>包含subversion1.1，用来替代CVS。</p>

<p>使用新的线程库NPTL，但是仍然支持以前的LinuxThreads，不过很有可能在以后的版本中不再支持。</p>

<p>一些依赖于LinuxThreads的旧的应用程序可能不会正常运行。<br/>
注：一些方法可以使需要LinuxThreads的应用程序仍然可以在RHEL3和RHEL4上运行：<br/>
O 使用LD_ASSUME_KERNEL环境变量来在运行时选择LinuxThreads而不是NPTL<br/>
O 在运行时，使用一个指向/lib/i686/或/lib/的rpath来选择LinuxThreads而不是NPTL<br/>
O 使用静态方法来链接应用程序，使它使用LinuxThreads来代替NPTL（不建议这么使用）<br/>
检查一个程序是否使用NPTL的方法：设置两个环境变量<br/>
LD_DEBUG=libs<br/>
LD_DEBUG_OUTPUT=<br/>
然后运行程序，如果一个程序产生了多个进程，则会生成多个文件。如果没产生纠错输出记录文件，那这个应用程序就是静态链接的。<br/>
如果生成了，检查里面的libpthread的行，特别是包括”calling init“的行：<br/>
grep “calling init.*libpthread” .*<br/>
如果libpthread前面的路径是/lib/tls/，这个应用程序使用NPTL，其他的路径表示它使用LinuxThreads。</p>

<p>支持Advanced Configuration and Power Interface(ACPI)<br/>
支持和不支持ACPI的系统会为硬件分配不同的顺序，这就可能导致潜在的设备名改变的可能。如老系统中的eth1可能会变为eth0。</p>

<p>RHEL4安装程序先加载SCSI驱动，再加载lpfc, qla2100, qla2200, qla2300, qla2322, qla6312,<br/>
qla6322, 所以可以保证SCSI设备的名字在光纤设备的前面。</p>

<p>Openssh3.9包括了对<code>~/.ssh/config</code>文件的严格的权限和所有者权限的检查。权限是600，所有者是~/的所有者，否则ssh会退出。</p>

<p>Glibc提供执行附加的内部数据健全检查，错误打到标准错误输出上。产生错误的程序会被中止，可以设置MALLOC_CHECK_来控制：<br/>
0-不产生错误，也不中止程序。<br/>
1-产生错误，但不中止程序。<br/>
2-不产生错误，但中止程序。<br/>
3-产生错误，并中止程序。<br/>
设置为0会使glibc做更多的检查，会影响性能。</p>

<p>Hugemem内核支持每进程4GB用户空间（其他内核支持3GB）和4GB直接内核空间。最大支持64G内存。16G内存以上需要hugemem核心，但是有一些性能方面的影响，主要使hugemem核心需要为内核和用户空间提供4GB地址空间，内核中必须保持两个分开的虚拟地址映射图，这会给用户和内核空间的转换带来些额外的系统开销，例如在系统调用和中断的时候。这些额外的系统开销对整体性能的影响在很大程度上要依据应用程序而定。<br/>
使用较少内存的环境也可以从这个内核中获益，特别是在运行能够从较大的用户空间中获益的应用程序的时候。</p>

<p>文件系统的异步I/O（AIO）当前只支持O_DIRECT或非缓冲的模式，异步拉（asynchronous<br/>
poll）接口和管道（pipes）AIO已不再被支持。</p>

<p>不支持USB硬盘，但闪存，CDROM和DVDROM支持。</p>

<p>使用megraraid)mbox驱动替换megaraid驱动，不再支持<br/>
0x101E, 0x9010<br/>
0x101E, 0x9060<br/>
0x8086, 0x1960设备</p>

<p>新安装的内核做为默认引导内核，这是由<code>/etc/sysconfig/kernel</code>控制的。<br/>
UPGRADEFAULT——控制新内核是否在默认情况下被启动（默认值yes）<br/>
DEFAULTKERNEL——名为这个值的内核RPM将在默认的情况下启动（默认值取决于硬件的设置）</p>

<p>编模块可以进入内核源代码中相应的目录，然后写一个Makefile文件：（模块源代码假设为foo.c）：</p>

<pre><code>Obj-m := foo.o  
KDIR := /lib/modules/$(shell uname –r)  
PWD := $(shell pwd)  
Default := $(MAKE) –C $(KDIR) SUBDIRS=$(PWD) modules  
</code></pre>

<p>运行make命令编译foo.o模块。</p>

<p>可以从<a href="http://www.redhat.com/docs">http://www.redhat.com/docs</a>上的Red Hat SELinux Policy Guide文档了解SELinux。</p>

<p>I18n文件不再被用于输入法的设置。取决于<code>/etc/X11/xinit/xinput.d</code>/或<code>~/.xinput.d/</code></p>

<p>使用xorg-x11<br/>
使用xprint库函数（libXp）的程序应升级至支持libgnomeprint/libgnomeprintui打印的APIs。</p>

<p>使用udev动态管理设备，在驱动程序加载时按需创建设备节点。<br/>
<code>/etc/udev/rules.d/</code>目录中的单独文件中，存放udev的额外规则。<br/>
<code>/etc/udev/permissions.d/</code>目录中的单独文件中，存放udev的额外的权限规则。</p>

<p>RedHat有一个第一步骤来配置一些硬件并做一些设置，但需要启动X。</p>

<p>默认使用Gnome桌面。</p>

<p>RHEL没有提供kernel-source包，Asianux仍然提供，以便和以前的版本兼容。</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">wgzhao</span></span>

      








  


<time datetime="2005-11-16T00:00:00+08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='//categories/linuxji-zhu/'>Linux技术</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://wgzhao.github.io/2005/11/16/Used-to-install-the-hard-disk-installed-RHEL4U1-Notes/" data-via="mlsx" data-counturl="http://wgzhao.github.io/2005/11/16/Used-to-install-the-hard-disk-installed-RHEL4U1-Notes/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2005/11/16/Red-Hat-Enterprise-Linux-4-boot-options/" title="Previous Post: 红帽企业 Linux 4启动引导选项">&laquo; 红帽企业 Linux 4启动引导选项</a>
      
      
        <a class="basic-alignment right" href="/2005/11/16/control-system-with-proc-fs/" title="Next Post: 使用 /proc 文件系统来控制系统">使用 /proc 文件系统来控制系统 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/01/14/block-youku-ads-cleanly/">彻底屏蔽优酷广告</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/21/explaining-the-postgresql-query-optimizer/">PostgreSQL查询优化简介</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/wgzhao">@wgzhao</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'wgzhao',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/wgzhao?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/wgzhao">My Delicious Bookmarks &raquo;</a></p>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - wgzhao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wgzhao';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://wgzhao.github.io/2005/11/16/Used-to-install-the-hard-disk-installed-RHEL4U1-Notes/';
        var disqus_url = 'http://wgzhao.github.io/2005/11/16/Used-to-install-the-hard-disk-installed-RHEL4U1-Notes/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
