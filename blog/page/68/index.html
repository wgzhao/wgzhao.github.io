
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux系统管理</title>
  <meta name="author" content="wgzhao">

  
  <meta name="description" content="在ACPI和APIC有什么关系？
中我谈到了acpi和apic的差别，以及内核如何接受这些参数的方法。 昨天去公安部解决qlogic 2312光纤卡加载后kernel panic的问题，现在很怪异，单核心加载没有问题，能正确识别到盘阵（IBM
Total Storage DS4500)， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wgzhao.github.io/blog/page/68">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Linux系统管理" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux系统管理</a></h1>
  
    <h2>关注Linux系统管理，运维开发以及大数据</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wgzhao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/05/10/Core-parameters-of-acceptable-manner-inconsistent/">内核接受的参数方式不一致</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-05-10T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/05/10/Core-parameters-of-acceptable-manner-inconsistent/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/05/10/Core-parameters-of-acceptable-manner-inconsistent/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在<a href="http://blog.wgzhao.com/read.php/239.htm">ACPI和APIC有什么关系？</a>
中我谈到了acpi和apic的差别，以及内核如何接受这些参数的方法。</p>

<p>昨天去公安部解决qlogic 2312光纤卡加载后kernel panic的问题，现在很怪异，单核心加载没有问题，能正确识别到盘阵（IBM
Total Storage DS4500)，但是SMP核心会给出SCSI 命令超时的错误，30分钟后就会kernel panic。尝试加了<code>apic=off</code>的核心参数，依然不管用。<br/>
只要想其他办法，比如更新驱动。但是无论怎么做，都是没有用。<br/>
后来查看了<code>/proc/interrupt</code>s文件，发现qla2300驱动，单核心使用中断是XT-PIC,SMP核心也采用XT－PIC，而不是期望的IO-APIC-level，觉得可能是驱动没有正确处理SMP核心。但是这样的卡不是第一次使用，其他地方都可以，难道是机器(IBM
x346)和卡配合的问题?查看了一下内核参数文档，发现apic的禁用方式写的是noapic，反正是测试，于是重启机器使用noapic核心参数测试，结果发现成功了。<br/>
原来前面使用的<code>apic=off</code>是不正确的，但是显然禁止电源管理是采用<code>acpi=off</code>的参数形式。  为什么参数接受方式要弄得不一样呢？这其中有什么不知道的秘密吗？不解.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/04/26/qualified-business/">&#8220;合格企业&#8221;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-26T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/04/26/qualified-business/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/04/26/qualified-business/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>出差南昌，走在步行街上，看到大量的为5.1造势的宣传广告，不过有些宣传我怎么看觉得不顺眼。举下面这个例子吧，一个大的宣传横幅上，用红色大字书写
“热烈庆祝xxxx眼镜公司通过国家质量检测为合格企业”<br/>
合格企业？通过庆祝，那我这样理解：要不就是这个公司的产品很久都没有合格了，今天终于合格了，应该庆祝一番；或者就是这个行业的产品基本上不合格，难得我们的产品的合格了，应该庆祝。
 一个企业生产的产品，合格是最基本的要求，如果这也值得庆祝，那我还敢买这个企业的产品吗？
相比两个理解而言，我希望是前者，两权相害取其轻嘛。况且我去年圣诞节买了眼镜，可不希望是这样（我的眼镜呢？似乎不见了）</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/04/24/linux-file-system-benchmarks/">Linux File System Benchmarks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-24T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/04/24/linux-file-system-benchmarks/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/04/24/linux-file-system-benchmarks/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>来源：<a href="http://fsbench.netnation.com/">Linux File System Benchmarks</a></p>

<p>There are lies, damn lies and benchmarks&hellip; Only a fool would base
his/her decision on benchmark results from a single source.
I recommend you download the following script and run your own
benchmarks, in your own enviroment just to be sure.</p>

<p>Because no single file system is the best in all situations, determining
which file system is the best for your application is not always easy.
However, as you will see for yourself, picking the right file system can
offer performance gains in excess of 95%.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/04/21/Remote-configuration-KDM-Login/">配置远程KDM登录</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-21T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/04/21/Remote-configuration-KDM-Login/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/04/21/Remote-configuration-KDM-Login/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>服务器端：
1. /etc/X11/xdm/Xaccess 文件，去掉这行的注释。
 # * #any host can get a login windows&#8221;
2. /etc/X11/xdm/xdm-config 文件，注释掉这一样。
 &ldquo;Display Manager .Requestport 0&rdquo;
3. /etc/X11/gdm/gdm.conf文件，[xdmcp]部分，把enable 改为 true
4. /etc/kde/kdm/kdmrc文件，[xdmcp]部分，把enable 改为 true
5. /etc/inittab 修改运行级别为5 (X11) ，如果为3的话，你看到的将不是桌面，而是命令行窗口。
6. 关闭防火墙
7. reboot</p>

<p>客户端：
X -query IP地址</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/04/19/sage-is-a-good-RSS-reader/">sage是个不错的RSS阅读器</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/04/19/sage-is-a-good-RSS-reader/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/04/19/sage-is-a-good-RSS-reader/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://sage.mozdev.org/">sage</a>我进<a href="http://www.mozilla.org">mozilla</a>的<a href="https://addons.mozilla.org">addons</a>看到的推荐插件，是一个RSS阅读器，看了一些截图，觉得不错，下载安装了一下，比我想象中的要好很多。支持opml的导入导出，样式可变的内容输出。
有时间可以看看他的代码，对我改进<a href="http://www.5itag.com">5itag</a>有帮助.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/04/19/Console-access/">控制台访问</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/04/19/Console-access/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/04/19/Console-access/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>上午去测试一个加密卡设备权限会发生变化的问题，其实这个问题和我的声卡情况相似。我一般都采用不同用户登录我的系统。<br/>
系统启动时默认会把我的声卡设备权限设置为0666,但是使用的过程中权限会发生变化，变成缺省的0600，导致普通用户不能使用声卡。<br/>
查了一些资料，得知这些设备的权限设置与文件<code>/etc/security/console.perms</code>文件有关，因此这里贴出我找到的有关该文件的一些说明：</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2006/04/19/Console-access/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/04/17/iostat-output-analysis/">Iostat 输出解析</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-17T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/04/17/iostat-output-analysis/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/04/17/iostat-output-analysis/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li>/proc/partitions</li>
</ol>


<p>iostat 的数据的主要来源是 <code>/proc/partitions</code>，所以需要先看看 <br/>
<code>/proc/partitions</code> 中有些什么。</p>

<pre><code>    # cat /proc/partitions  
    major minor   #blocks name rio rmerge rsect ruse wio wmerge wsect wuse
    running use aveq  

     3 0 19535040 hda 12524 31127 344371 344360 12941 25534 308434 1097290
    -1 15800720 28214662  
     3 1 7172991 hda1 13 71 168 140 0 0 0 0 0 140 140  
     3 2 1 hda2 0 0 0 0 0 0 0 0 0 0 0  
     3 5 5116671 hda5 100 477 665 620 1 1 2 30 0 610 650  
     3 6 265041 hda6 518 92 4616 2770 257 3375 29056 143880 0 46520 146650  
     3 7 6980211 hda7 11889 30475 338890 340740 12683 22158 279376 953380 0
    509350 1294120  
</code></pre>

<p>major: 主设备号。3 代表 hda。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2006/04/17/iostat-output-analysis/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/04/14/why-not-visit-google/">为什么google访问不了？</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-14T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/04/14/why-not-visit-google/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/04/14/why-not-visit-google/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>上班第一件事，打开我的blog和google，结果发现我的blog打开了，但是google却没有办法打开。
怎么换DNS都没有用，其他网址都行。
为什么google总是访问不了？这其中大约有很多非技术的因素了，shit！</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/04/14/expect-to-make-your-task-easier-2/">Expect，让你的任务更轻松（2）</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-14T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/04/14/expect-to-make-your-task-easier-2/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/04/14/expect-to-make-your-task-easier-2/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在我<a href="http://mlsx.xplore.cn/read.php/296.htm">前一篇文档</a>中提到了expect的基本原理和简单适用。<br/>
在这篇文当中我主要介绍一下expect自带的程序的简单使用。</p>

<pre><code>$rpmall expect 
....... 
/usr/bin/autoexpect 
/usr/bin/dislocate
/usr/bin/expect 
/usr/bin/ftp-rfc 
/usr/bin/kibitz 
/usr/bin/lpunlock
/usr/bin/mkpasswd 
/usr/bin/passmass 
/usr/bin/rftp
 /usr/bin/rlogin-cwd
/usr/bin/timed-read 
/usr/bin/timed-run 
/usr/bin/unbuffer
/usr/bin/weather 
/usr/bin/xkibitz 
.....  
</code></pre>

<p>autoexpect:这个脚本将根据自身在运行时用户的操作而生成一个expect脚本。它的功能某种程度上类似于在Emacs编辑器的键盘宏工具。一个自动创建的脚本可能是创建自己定制脚本的好的开始。比如我要使用ssh登录一台机器，你可以这样做：<br/>
[mlsx@wgzhao   ~]$ autoexpect -f ssh.exp ssh mlsx@localhost autoexpect
started, file is ssh.exp mlsx@localhost&rsquo;s password: Last login: Thu Apr
13 17:04:23 2006 from localhost.localdomain [mlsx@wgzhao   ~]$<br/>
你所有的操作都记录再ssh.exp文件里面，下次如果你还想用同样的登录相同的机器，那你可以这样做：<br/>
[mlsx@wgzhao   ~]$ ./ssh.exp spawn ssh mlsx@localhost mlsx@localhost&rsquo;s
password: Last login: Thu Apr 13 17:04:56 2006 from
localhost.localdomain [mlsx@wgzhao   ~]$<br/>
此时你不用输入密码。如果你希望登录后做一些操作，然后退出，那也同样可以做到。</p>

<p>dislocate:能从断开连接的进程中再重新连接操作。比如你在办公室正编辑一个文档，下班了，你可以从家里继续连接来作这个活。不过我怎么折腾也没有太明白应该如何使用这个命令。<br/>
ftp-rfc:自动获取rfc文档的一个ftp连接脚本，只要输入你需要的rfc文档编号，就可以获得。比如你输入ftp-rfc
1801，你就能得到rfc1801.Z文档。<br/>
kibitz，xkibitz：这是一个允许两个以上的用户同时连接到一个shell上，共同完成一件任务，比如共同编辑email，文档等。特别适合教学和指导。因为其中任何一个人的任何输入，其他人都可以看到。<br/>
lpunlock：解锁打印机，不太清楚如何使用<br/>
mkpasswd：想获得好的密码吗？试试这个命令吧，还识别一些参数来增强密码的安全性，对于批量生产密码和产生一次性密码是一个不错的选择。<br/>
passmass：如果你在很多机器上都有一个帐号，你可以使用这个命令来同步修改密码，很有用哟。<br/>
rftp：如何可以在命令行下使用ftp命令来下子一个目录和上传一个目录？rftp是这个问题的答案，使用方法和普通ftp一样。只是多了3个命令,  ~p,  ~g,  ~l，  ~p是把当前本地目录上传。  ~g则是把远程机器的目录下载。  ~l是列出远程机器的当前目前目录及子目录的文件。<br/>
rlogin-cwd：rlogin登录后同时进入到你指定的目录<br/>
timed-read:这个脚本是从标准输入读入一行，然后输出，但是如果超过给定的参数的秒数，那么就会自动退出。<br/>
timed-run：有点类似timed-read，在指定的时间内执行某一个命令,比如timed-run 20
passwd，如果20秒内没有输入，程序自动退出。<br/>
unbuffer：停止输出的缓冲，当输出重定向的时候。比如你使用od -c /etc/passwd
|more命令的时候，刚开始你可能什么都看不到，直到所有的输出进入缓冲后才显示第一屏。<br/>
 如果使用unbuffer od -c
/etc/passwd，那么你就可以立刻看到第一屏的信息了。这个命令或许对于之想看到第一屏信息的人来说有用，我还不知道用她来做什么。<br/>
weather：自动获取天气情况，默认只能获取美国的天气，如果能知道本国的天气预报服务程序，那么就可以改造了，呵呵。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2006/04/12/celebrate-more-than-100000-visits/">庆祝一下访问量超过10万</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-12T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2006/04/12/celebrate-more-than-100000-visits/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2006/04/12/celebrate-more-than-100000-visits/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>刚刷新主页，发现访问量超过了10万，虽然这相比很多其他人的blog，这只是他们的一个小数，然而在于我，却是一个实在的鼓励和鞭策，感谢每一位访问我blog的人，感谢他们能够容忍我出差时长时间的不更新数据。
google在数周前就给我发了网站分析的邀请，可惜一直在出差在外面，没有机会上网，直到上午才做完所有的配置。
过段时间，我会把分析图标贴出来。
再次感谢大家！</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/69/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/67/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/01/14/block-youku-ads-cleanly/">彻底屏蔽优酷广告</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/21/explaining-the-postgresql-query-optimizer/">PostgreSQL查询优化简介</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/wgzhao">@wgzhao</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'wgzhao',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/wgzhao?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/wgzhao">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - wgzhao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wgzhao';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
