
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux系统管理</title>
  <meta name="author" content="wgzhao">

  
  <meta name="description" content="我把硬盘上超过80％的空间都给了LVM，之后我需要从LVM中划出一个空间出来用作基本文件系统，上面的数据非常多，而且我也没有地方可以挪，之前的思路一直都是把重要数据挪走，然后重新分区，然后把数据拷贝回来。 今天早晨，突然想起PV是不是也有修改分区大小的功能呢，果然如此， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wgzhao.github.io/blog/page/22">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Linux系统管理" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux系统管理</a></h1>
  
    <h2>关注Linux系统管理，运维开发以及大数据</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wgzhao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/17/reduce-the-logical-volume-pv-in-the-physical-size/">缩小逻辑卷中PV物理分区大小的一个例子</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-17T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/07/17/reduce-the-logical-volume-pv-in-the-physical-size/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/07/17/reduce-the-logical-volume-pv-in-the-physical-size/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我把硬盘上超过80％的空间都给了LVM，之后我需要从LVM中划出一个空间出来用作基本文件系统，上面的数据非常多，而且我也没有地方可以挪，之前的思路一直都是把重要数据挪走，然后重新分区，然后把数据拷贝回来。</p>

<p>今天早晨，突然想起PV是不是也有修改分区大小的功能呢，果然如此，pvresize即使我需要的命令。为了安全起见，我备份了与分区和LVM相关的一些信息，比如MBR，比如sfdisk的的信息，比如PV，VG，LV的信息。</p>

<p>卸载所有lv的分区，开始冒险之旅。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/07/17/reduce-the-logical-volume-pv-in-the-physical-size/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/11/something-of-the-past-days/">这几天的流水帐</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-11T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/07/11/something-of-the-past-days/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/07/11/something-of-the-past-days/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>有快一周没有写任何东西了，原因很简单，时间来不及，南北跑了一趟，人还没有恢复过来，暂做一个流水帐吧。</p>

<p>7.3晚上去北京的飞机，算是亲眼看到了传说中的三号航站楼，果然很大很气派，似乎有点奢侈。不过来不及多看，上了计程车，直奔“歌神”KTV，兄弟们都在那儿呢。</p>

<p>一进包厢，果然是人头攒动，歌声，笑声打骂声，声声入耳，进门就被“那一夜的烟花”蹂躏了一番，还好，没有人立刻要我喝酒，大家关心的问我吃了没有，当然没吃呀，还是上飞机前在机场买了一个方便面呢，还是lancy逼我买的（很贵，很暴利）</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/07/11/something-of-the-past-days/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/11/Recently-updated-estimates-will-not-blog/">近段时间估计不会更新博客</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-11T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/07/11/Recently-updated-estimates-will-not-blog/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/07/11/Recently-updated-estimates-will-not-blog/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>出差回来后，发现CDMA处于很不正常的状态，基本上没有办法使用，比如打开我的博客首页，十次中会有9次提示超时，一次能打开后，再点击里面的连接，仍然会给出远程服务器不能响应的错误。</p>

<p>打电话给联通是没有意义了，现在都重组了，都不知道该谁管了。</p>

<p>所以，不知道什么时候能好，也不知道什么时候能正常上网。</p>

<p>等我能正常上网了，我会尽快更新我的博客（希望这一天不是遥远的将来）</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/03/Hardware-or-software-problem/">硬件问题还是软件问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-03T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/07/03/Hardware-or-software-problem/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/07/03/Hardware-or-software-problem/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>PCserver上，一直跑着的系统和应用，突然之间执行大部分文件操作都出现I/O错误，屏幕不停的出现类似：</p>

<pre><code> EXT3-fs error (devcie sd(1:0)) in start_transaction: Journal has aborted 
</code></pre>

<p>执行dmesg信息，有类似下面的错误</p>

<pre><code> scsi1 (0:0) rejecting I/O to offline device 
</code></pre>

<p>scsi1是本地磁盘，看看机器本地磁盘的四个磁盘LED灯，一个都不亮，果然是典型的offline的状态。<br/>
我开始估计是磁盘出问题了，导致offline的，而且不止一个磁盘出问题，因为做了RAID5,一个有问题，还不至于。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/07/03/Hardware-or-software-problem/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/30/check-ip-address-with-bash/">用bash校验IP地址</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-30T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/06/30/check-ip-address-with-bash/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/06/30/check-ip-address-with-bash/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>代码：</p>

<p>File /Users/wgzhao/Codes/wgzhao.github.io/source/downloads/code/valid_ip.sh could not be found</p>

<p>测试：</p>

<pre><code>#sh valid_ip.sh
4.2.2.2             : good
a.b.c.d             : bad
192.168.1.1         : good
0.0.0.0             : good
255.255.255.255     : good
255.255.255.256     : bad
192.168.0.1         : good
192.168.0           : bad
1234.123.123.123    : bad
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/24/tag-based-filesystem/">Tag-based Filesystem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-24T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/06/24/tag-based-filesystem/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/06/24/tag-based-filesystem/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这两天和同事在讨论传统分类和标签(tag,label)的问题，突然想起很早以前看到的一个视频，讲述的是下一代文件系统的特征，是真正桌面应用，其中提到了标签，也就是用户关注不再文件系统这个层次，而是逻辑层。<br/>
所以，我想到了基于标签的文件系统，“我总不是第一个想到的”，google一把后，果然发现有不少组织在做这个，也下载了一些代码，不过目前都处于原型阶段，生产应用恐怕还是有些难度。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/06/24/tag-based-filesystem/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/24/kung-fu-panda/">看完《功夫熊猫》</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-24T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/06/24/kung-fu-panda/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/06/24/kung-fu-panda/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>原本没用打算要看的，中午lancy打电话过来说要我下载，说听别人讲很好看，于是找刘要了有一个下载地址，从中午一直下载到下班，总算下载了下来。</p>

<p>吃过晚饭，托过地板，电影开始。虽然从出现开头就知道了结尾，但是中间的一些细节还是比较有意思的，也挺搞笑的。</p>

<p>整个片子的场景都是中国的元素，但是除此之外，恐怕再也没用其他东西是中国的了，思维模式，表情，表达模式都是好莱坞标准。当然电影阐述的一些哲理的东西算是中国的一些精髓。</p>

<p>我之前没用看任何相关的一些宣传和花絮，所以我不知道为什么片子中会有很多汉语拼音来代替英语，比如乌龟不说“tortoise”，而说“wugui”，还有一些。难道是讽刺中国人说英语吗？</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/23/Based-on-the-SSL-certificate-configuration/">基于SSL的电子证书配置</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-23T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/06/23/Based-on-the-SSL-certificate-configuration/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/06/23/Based-on-the-SSL-certificate-configuration/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>折腾了两天，基本完成，但是其实现原理，我还是不太了解，因此不敢长篇大论的来说SSL如何，电子证书如何。<br/>
而且我现在也还不知道我现在完成的目标是不是真的就是可以用在实际项目的要求，<del>也不知道采取USB-KEY的方式能否验证通过</del>（经过实验，已经通过）。<br/>
因此，仅记录我的实验步骤。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/06/23/Based-on-the-SSL-certificate-configuration/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/22/LaTex-and-related-information/">与LaTex有关的一些资料</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-22T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/06/22/LaTex-and-related-information/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/06/22/LaTex-and-related-information/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>几个编辑器</strong></p>

<ol>
<li><p>LEd: LaTeX Editor (freeware)
<a href="http://www.latexeditor.org/">http://www.latexeditor.org/</a></p></li>
<li><p>MeWa &ndash; The Editor for LaTeX Source (open source software, inspired by TeXnicCenter)</p></li>
</ol>


<p><a href="http://www.meshwalk.com/latexeditor/">http://www.meshwalk.com/latexeditor/</a></p>

<ol>
<li><p>Texmaker (freeware): an unicode editor
<a href="http://www.xm1math.net/texmaker/">http://www.xm1math.net/texmaker/</a></p></li>
<li><p>WinShell (freeware):
<a href="http://www.winshell.de/">http://www.winshell.de/</a></p></li>
</ol>


</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/06/22/LaTex-and-related-information/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/20/LVM-snapshot-on/">LVM Snapshot简述</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-20T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2008/06/20/LVM-snapshot-on/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2008/06/20/LVM-snapshot-on/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这两天看了有关LVM快照(snapshot)的一些资料，加上pczou的一些指导，对snapshot有一些理解，记录如下，和大家共享：</p>

<p><a href="http://en.wikipedia.org/wiki/Logical_Volume_Manager_(Linux">Logical Volume Manager (LVM)</a>)提供了对任意一个Logical Volume(LV)做“快照”(snapshot)的功能，以此来获得一个分区的状态一致性备份。
在某一个状态下做备份的时候，可能有应用正在访问某一个文件或者数据库，这就是使得备份的时候文件处于一个状态，而备份完后，文件却处于另外一个状态，从而造成备份的非一致性，这种状态恢复数据库数据几乎不会成功。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2008/06/20/LVM-snapshot-on/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/23/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/21/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/01/14/block-youku-ads-cleanly/">彻底屏蔽优酷广告</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/21/explaining-the-postgresql-query-optimizer/">PostgreSQL查询优化简介</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/wgzhao">@wgzhao</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'wgzhao',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/wgzhao?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/wgzhao">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - wgzhao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wgzhao';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
