
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux系统管理</title>
  <meta name="author" content="wgzhao">

  
  <meta name="description" content="费了一晚上的时间，总算帮lancy搞定了上网的问题，不出意外，以后她应该可以偷偷摸摸上网了。
唉，在事业单位，怎么上个网就这么难呢？
">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wgzhao.github.io/blog/page/46">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Linux系统管理" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linux系统管理</a></h1>
  
    <h2>关注Linux系统管理，运维开发以及大数据</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com.hk/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wgzhao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/03/08/work-as-network-engineer-tonight/">当了一晚上的网络工程师</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-03-08T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/03/08/work-as-network-engineer-tonight/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/03/08/work-as-network-engineer-tonight/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>费了一晚上的时间，总算帮lancy搞定了上网的问题，不出意外，以后她应该可以偷偷摸摸上网了。
唉，在事业单位，怎么上个网就这么难呢？</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/03/07/commands-start-k/">[/sbin学习]k*命令</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-03-07T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/03/07/commands-start-k/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/03/07/commands-start-k/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>/sbin下j开头的命令没有，k开头的也只有三个，而且比较简单
killall5:发送中断信号给所有的进程，除了自己，它只接受一个参数，那就是中断信号数。
klogd:系统内核日志daemon程序，一般有/etc/init.d/syslogd脚本来调用，有关日志系统的介绍，可以参考
<a href="read.php/334.htm">Linux日志文件系统</a>。
kmodule：没有任何说明和帮助，string了一下，也没有看到什么有用的信息，执行了一下，输出了目前我的系统已经加载的内核模块，但是他的显示又和lsmod不同，比如声卡驱动，lsmod打印可能会有3，4行信息，但是Kmodule仅仅一行，就是告诉你加载了什么类型的声卡驱动。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/03/05/king-shampoo-good/">霸王洗发水，不错！</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-03-05T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/03/05/king-shampoo-good/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/03/05/king-shampoo-good/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>决定买霸王洗发水来自两个理由：<br/>
1）成龙的广告效果，仔细看了成龙讲述为什么要接拍霸王洗发水广告的原因，觉得应该是不错的，相信成龙大哥。<br/>
2）妹夫由此也推荐我用，说这个洗发水效果不错，不容易生头皮屑。</p>

<p>于是双休去买了一个大瓶装的，46.8元，他有很多类型，我们买的焗油养发型的，比较适合lancy。</p>

<p>昨天lancy先洗，洗完我问怎么样，他说不错，感觉比较柔顺，别的到时没有什么感觉。</p>

<p>到了晚上我洗的时候，也没有什么感觉，不过中药的味道到时比较重，洗完后，觉得比较干净，同时觉得头发有点干燥。</p>

<p>今天早晨一醒来，lancy照了镜子说，你看我的头发，没有那么蓬松了，平常每天起来都要大理半天，要不就要用啫喱水，我说没有那么神奇吧，我没有感觉。</p>

<p>去刷牙，我抬头一看，呵呵，果然有效果，因为我发现我的头发有了变化，确实比之前要柔顺多了，见过我的人都知道我的头发是什么样子的&mdash;那叫一个酷，我的头发一直都是向上和向前长，形成一个中间突出的发型，平常我自嘲道“等我出了名，我这发型就独一无二了”。
今天早晨却没有了这个发型了，由此看来，霸王洗发水，效果真的不错。</p>

<p>等再过几天，如果效果一直都这样好，我就给我妈买一瓶，我们几姊妹的发质都是遗传我妈的。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/03/04/Want-to-buy-a-bed/">想买一张床</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-03-04T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/03/04/Want-to-buy-a-bed/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/03/04/Want-to-buy-a-bed/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>下去和lancy家具市场看床去了，主要是现在这张床太不爽了，睡得腰伤背疼的，并且也窄了。</p>

<p>只是没有想到床居然是那样的贵，先不说床垫了，我们只是找最便宜的实木床，转了一圈，其行情是：</p>

<p>1.2m的床1000左右，1.5m的床1300左右，1.8m的床1600左右。</p>

<p>感觉这个价格暂时不再我们接受的范围之内，不过其中我们看到了一个其中瑕疵的床，1.2m的，床头有明显磕坏的痕迹，老板的出价是460，她说当时进价还要480，听他这么一说，我知道这床的利润空间看来是蛮大的。反复了两次，还是没有下定决心买，想下周去另外几个家具城看看再做定夺。</p>

<p>看来还得忍受一段时间了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/03/02/javascript-get-all-data-from-form/">获得表单所有数据的简单javascript脚本</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-03-02T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/03/02/javascript-get-all-data-from-form/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/03/02/javascript-get-all-data-from-form/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>写这个脚本是为Ajax服务的，我们知道Ajax发起http请求后，查询字符串是需要自己送出去，而不是依赖表单的提交方式(submit)。这样一来这个脚本就能派上用场了，只是这里没有做表单的校验。下次可以考虑写一个表单校验的js脚本。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2007/03/02/javascript-get-all-data-from-form/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/03/01/simple-small-bandwidth-test-script/">简单的带宽测试小脚本</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-03-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/03/01/simple-small-bandwidth-test-script/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/03/01/simple-small-bandwidth-test-script/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这是一个简单的脚本，通过定时读取<code>/proc/net/dev</code>文件来得出某个时刻输出的速度和输入的速度。 代码如下：</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2007/03/01/simple-small-bandwidth-test-script/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/03/01/Js-dynamic-cross-border-settlement-of-the-issue-by-value/">利用动态js解决跨域传值问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-03-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/03/01/Js-dynamic-cross-border-settlement-of-the-issue-by-value/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/03/01/Js-dynamic-cross-border-settlement-of-the-issue-by-value/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>由于JavaScript的“同源策略”以及浏览器基于安全的考虑，跨域访问成为Ajax应用的一个难题。
不仅仅是在不同域的网页之间传值存在问题，就是用iframe来框住一个页面，只要这个页面的域和父页面不同，访问iframe的内容也是不可能的。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2007/03/01/Js-dynamic-cross-border-settlement-of-the-issue-by-value/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/02/28/N-random-access-to-the-database-be-recorded-in-several-ways/">随机获取N条数据库记录的几个方法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-02-28T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/02/28/N-random-access-to-the-database-be-recorded-in-several-ways/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/02/28/N-random-access-to-the-database-be-recorded-in-several-ways/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我需要从一个数据库表中随机的获取N条数据库，最先想到的办法是两次访问数据库，第一次是获得记录条数M，  然后在产生个N随机数K_j(0&lt;=j&lt; N)，其中0&lt;=K_j&lt;=M.  然后获取键值为K_j的记录数。
但是两次查询数据库是其缺点，简单实现方法如下：</p>

<pre><code>$range_result = mysql_query( " SELECT MAX(id) AS max_id , MIN(id) AS
min_id FROM tb_name ");  
$range_row = mysql_fetch_object( $range_result );  
$random = mt_rand( $range_row-&gt;min_id , $range_row-&gt;max_id );  
$result = mysql_query( " SELECT * FROM tb_name WHERE id &gt;= $random
LIMIT 0,1 ");
</code></pre>

<p>于是查阅其手册（MySQL），其中提到用order by rand() 和limit两结合来获取随机记录。另外google了一下，还发现了其他一些好的方法，特记录下来：</p>

<ol>
<li><p>采用官方的方式</p>

<p> select * from tb_name order by rand() limit N</p></li>
<li><p>采用类似偏移方式</p>

<p> select * from tb_name where id >= (select floor(max(id) * rand()) from tb_name ) order by id asc limit N;</p></li>
<li><p>优化的方式</p>

<p> select * from tb_name as r1 join (select round(rand() * (select max(id) from tb_name)) as id2) as r2 where r1.id >= r2.id2 order by r1.id asc limit N;</p></li>
</ol>


<p>上述方法，第一种效率最低，第三种最好。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/02/27/Spring-Festival-has-witnessed-the-strange-status-quo/">春节目睹之怪现状</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-02-27T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/02/27/Spring-Festival-has-witnessed-the-strange-status-quo/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/02/27/Spring-Festival-has-witnessed-the-strange-status-quo/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>年三十是在湘潭和父母一起过的年，春晚拍马屁拍得出了洋相便是目睹的第一件怪事。</p>

<p>初三清晨动身去乡下lancy家，先到了益阳，才发现国家发改委的话其实和放屁也没有什么差别，汽车票该涨价时还是得涨价，而且更有意思的是，售票窗口根本就不售票，自己去车上买，意思是宰多宰少就靠你自己一张嘴了。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2007/02/27/Spring-Festival-has-witnessed-the-strange-status-quo/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/02/15/Red-letters/">封红包</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-02-15T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/2007/02/15/Red-letters/#disqus_thread"
             data-disqus-identifier="http://wgzhao.github.io/2007/02/15/Red-letters/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这无疑是年度最难的问题了，lancy和我用了将近2个小时讨论才将分配方案确定下来，不容易呀。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/47/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/45/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/01/14/block-youku-ads-cleanly/">彻底屏蔽优酷广告</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/30/some-tips-for-mac-os-x/">一些Mac OS X 的使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/24/generate-random-strings-and-other-tips-on-postgresql/">生成随机字符串以及自动更新时间戳和返回最近插入的ID号</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/22/some-way-to-io-statistics-on-linux/">Linux下的一些I/O统计工具</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/21/explaining-the-postgresql-query-optimizer/">PostgreSQL查询优化简介</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/wgzhao">@wgzhao</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'wgzhao',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/wgzhao?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/wgzhao">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - wgzhao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wgzhao';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
