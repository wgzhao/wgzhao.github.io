<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=GB2312">
<meta http-equiv="Pragma" content="no-cache" />
<title>get form data test V0.1</title>
<script type="text/javascript">
 var dtype=Array("input","select","textarea"); /*要获取哪些元素的数据*/
 var dtypeNum = 3;
 /*
 * 获取指定的表单的所有元素应该传递的值，并形成查询字符串。
 * 主要用在Ajax环境下，传递查询参数。
 * author: mlsx
 * blog: http://mlsx.xplore.cn
 * date: 2007-03-02
 */
function getformdata(formobj)
{
 try{
 var d = document.getElementById(formobj);
 var i = 0;
 var j = 0;
 var qstring = "";
 var nodeArray = new Array();
 for(;i<dtypeNum;i++)
 {
 nodeArray.push(d.getElementsByTagName(dtype*));
 }
 var nodenum = 0;
 for(i=0;i<dtypeNum;i++)
 {
 nodenum = nodeArray*.length;
 var tmpobj = nodeArray*;
 for(j=0;j<nodenum;j++)
 {
 var stype = tmpobj[j].type;
 //alert(stype);
 
 if (stype == "text" || stype == "password" || stype == "hidden" ||
stype == "textarea") /*一般文本输入框*/
 qstring+="&" + tmpobj[j].name + "=" + tmpobj[j].value; 
 else if (stype == "checkbox" || stype == "radio") //选择框
 {
 if (tmpobj[j].checked) qstring+="&" + tmpobj[j].name + "=" +
tmpobj[j].value; 
 }
 else if (stype == "select-one" || stype == "select-multiple")
/*下来框，包括单选和多选*/
 {
 var selectNum = tmpobj[j].length;
 for(var k =0;k<selectNum;k++)
 if (tmpobj[j][k].selected) qstring+="&" + tmpobj[j].name + "=" +
tmpobj[j][k].value; 
 }
 }
 }
 return qstring.substring(1,qstring.length); /*去掉第一个多于的&符号*/
 
}
catch(e) {alert(e); return false;}
}
</script>
</head>
<body>
<form action="getdata.html" name="tform" id="tform" method="get" >
<input type="text" value="input value" name="tinput" /> 
<input type="password" value="password value" name="pinput" /><br/>
<textarea name="text" rows="3" cols="40">textarea value</textarea>
</body>
</html>
